"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(t,e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.export?module.exports=e:t.waterfall=e}(window,function(o){var s,i,a,l,c=this,u=arguments,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.direction||"v",f=Number(t.spacing)||20,h=Number(t.baseWidth)||250,d=Number(t.height)||260,y=Number(t.accuracy)||2,g=t.datas||null,m=t.rowClass||"",p=t.itemClass||"",v=function(t){return Math.floor(100*t)/100},b=function(){var t=document.createElement("div"),e="";return g.forEach(function(t){e+="string"==typeof t?'\n                    <div class="fall-item">\n                        <img alt="'+t+'" src="'+t+'"/>\n                    </div>\n                ':'\n                    <div class="fall-item">\n                        <img alt="'+t.url+'" src="'+t.url+'"/>\n                    </div>\n                '}),t.innerHTML=e,t.children},w=function(t){return t+"px"},n=function(){s.innerHTML="";var l=s.clientWidth,a=0,c=0,u=[],r=[],o=function(){if(!(u.length<1)){var o=l-(u.length-1)*f,n=0,i=0;1==u.length?i=d:(u.forEach(function(t){var e=t.querySelector("img");n+=e.width/e.height}),i=v(o/n)-y),u.forEach(function(t,e){var n=t.querySelector("img"),r=n.width/n.height*i;n.style.height=i+"px",e===u.length-1?(n.style.width="auto",(o<r||2.5<n.width/n.height)&&(n.style.width=o+"px",n.style.height=n.height/n.width*o+"px"),t.style.marginRight=0):(n.style.width=r+"px",t.style.marginRight=f+"px")}),r.push(u),a=c=0,u=[]}};i.forEach(function(t,e){var n=t.querySelector("img"),r=v(d/n.naturalHeight)*n.naturalWidth;(t.dataset.index=e,console.log(e),console.log(a),l<a+r)&&(function(n,t,r){var e=Array.from(arguments).splice(2,arguments.length),o=n,i=n;return 1!=t?e.forEach(function(t){var e=Math.abs(t-n);e<i?(i=e,o=t):o=r}):o=2.5<r/d?r:-1,o}(l,c,a,a+r)===a&&o(),console.log(a));c++,a+=r+=f,u.push(t),e>=i.length-1&&o()}),r.forEach(function(t,e){var n=document.createElement("div");m&&n.classList.add(m),n.classList.add("fall-row"),n.style.display="flex",n.style.justifyContent="space-between",e<r.length-1&&(n.style.marginBottom=f+"px"),n.append.apply(n,_toConsumableArray(t)),s.appendChild(n)})},x=function(){s.innerHTML="","h"===e?n():function(){var t=s.clientWidth,e=Math.floor((t+f)/(h+f));e<1&&(e=1);var l=(t+f)/e-f;i.length<e&&(e=i.length,l=(t+f)/e-f),a={};for(var n=0;n<e;n++)a[n]=0;i.forEach(function(t){var e=t.querySelector("img"),n=e.naturalWidth,r=e.naturalHeight*(l/n),o=function(t){var e=0;for(var n in t)t[n]<t[e]&&(e=n);return e}(a),i=a[o]||0;e.style.width="100%",e.style.maxWidth="100%",t.style.position="absolute",t.style.top=w(i),t.style.left=w((l+f)*o),t.style.width=w(l),t.style.height=w(r),a[o]=i+r+f,s.appendChild(t)});var r=function(t){var e=0;for(var n in t)t[n]>t[e]&&(e=n);return e}(a);s.style.height=w(a[r])}()};!function(){if(o&&"string"==typeof o&&(s=document.querySelector(o),(i=g&&0<g.length?Array.from(b()):Array.from(s.children)).length)){l=i.length;var t,e,n,r=function(){--l<=0&&x()};i.forEach(function(t){p&&!t.classList.contains(p)&&t.classList.add(p);var e=t.querySelector("img");e.complete?r():(e.onload=function(){r()},e.onerror=function(n){i.forEach(function(t,e){t.querySelector("img").src===n.target.src&&i.splice(e,1)}),r()}),e.style.display="block"}),s.style.position="relative",s.style.overflow="hidden",window.addEventListener("resize",(t=x,e=500,n=null,function(){clearTimeout(n),n=setTimeout(function(){return t.bind(c)(u)},e)}))}}()});