---
title: å‰ç«¯ç¨‹åºå‘˜å­¦ä¹  Docker çš„ç¬”è®° ï¼ˆ-ï¼‰
description: ä»å‰ç«¯å¼€å‘è€…çš„è§’åº¦ä»‹ç» Docker çš„åŸºç¡€çŸ¥è¯†å’Œå®è·µåº”ç”¨ã€‚æ–‡ç« è§£é‡Š Docker çš„æ¦‚å¿µã€ä¼˜åŠ¿åŠä¸»è¦ç»„ä»¶,å¹¶é€šè¿‡éƒ¨ç½² Next.js é¡¹ç›®çš„å®ä¾‹,è¯¦ç»†æ¼”ç¤º Docker çš„å®‰è£…ã€é…ç½®ã€é•œåƒæ„å»ºã€å®¹å™¨è¿è¡Œä»¥åŠå‘å¸ƒåˆ° Docker Hub çš„å…¨è¿‡ç¨‹ã€‚ä½œè€…è¿˜æä¾›äº†å¸¸ç”¨ Docker å‘½ä»¤çš„è¯´æ˜,ä¸ºå‰ç«¯å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ Docker æä¾›äº†å®ç”¨æŒ‡å—ã€‚æ–‡ç« å†…å®¹å…¨é¢ä¸”æ˜“æ‡‚,é€‚åˆæƒ³è¦å­¦ä¹  Docker çš„å‰ç«¯å¼€å‘äººå‘˜é˜…è¯»
tags: [docker, ç¬”è®°]
slug: docker-learn-1
author: luckySnail
# cover:
date: 2024-05-12
---

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿æ˜Ÿã€‚æœ€è¿‘å…¬å¸ä½¿ç”¨ Docker è¿›è¡Œäº†é¡¹ç›®éƒ¨ç½²ï¼Œä½†æ˜¯æˆ‘è¿˜ä¸ä¼š Dockerã€‚äºæ˜¯å°±è¡¥äº†ä¸€ä¸‹æŠ€æœ¯æ¼æ´ï¼Œé¡ºä¾¿å†™ä¸€ä¸ªç¬”è®°ï¼Œè®°å½•å­¦ä¹ ï¼Œå› ä¸ºæœ€å¥½çš„å­¦ä¹ å°±æ˜¯è¾“å‡ºå˜›ï¼å› ä¸ºæœ¬äººæ˜¯å‰ç«¯å¼€å‘ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥éƒ½æ˜¯ä»å‰ç«¯è§†è§’åˆ†äº« Docker çš„ å­¦ä¹ 

## ä»€ä¹ˆæ˜¯ Dockerï¼Ÿ

å®˜æ–¹è§£é‡Šï¼šâ€œAccelerate how you build, share, and run applications. Docker helps developers build, share, run, and verify applications anywhere â€” without tedious environment configuration or management.â€
ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šåŠ å¿«æ‚¨**æ„å»ºã€å…±äº«å’Œè¿è¡Œåº”ç”¨ç¨‹åº**çš„é€Ÿåº¦ã€‚Docker å¸®åŠ©å¼€å‘äººå‘˜**åœ¨ä»»ä½•åœ°æ–¹æ„å»ºã€å…±äº«ã€è¿è¡Œå’ŒéªŒè¯åº”ç”¨ç¨‹åºï¼Œæ— éœ€ç¹ççš„ç¯å¢ƒé…ç½®æˆ–ç®¡ç†**ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ

çŸ¥é“äº†ä»€ä¹ˆæ˜¯ Dockerï¼Œå¯èƒ½è¿˜æ˜¯ä¸çŸ¥é“ Docker æ˜¯å¹²ä»€ä¹ˆçš„ã€‚è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼šå¼€å‘è€…å°å¼ åœ¨æœ¬åœ°å¼€å‘äº†ä¸€ä¸ª web åº”ç”¨ï¼Œå¹¶ä¸”è°ƒè¯•ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¿™æ—¶å€™å°å¼ æŠŠåº”ç”¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œè®©æ‰€æœ‰äººéƒ½èƒ½çœ‹åˆ°ã€‚é‚£å°å¼ å°±éœ€è¦**åœ¨è¿œç¨‹æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªå’Œæœ¬åœ°ä¸€æ ·çš„ç¯å¢ƒ**ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“ï¼ŒWebæœåŠ¡å™¨ã€‚å³ä½¿è¿™äº›ç¯å¢ƒä¸€æ ·ï¼Œè½¯ä»¶ä¹Ÿä¸ä¸€å®šèƒ½è¿è¡Œï¼Œå› ä¸ºæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿå’Œæœ¬åœ°ä¸ä¸€æ ·ã€‚ä¸ºäº†æ¨¡æ‹Ÿå®Œå…¨ç›¸åŒçš„æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œå¯èƒ½ä¼šæƒ³ç€ä½¿ç”¨è™šæ‹Ÿæœºï¼Œä½†æ˜¯è™šæ‹Ÿæœºéœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶è¿è¡Œæ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œè€Œä¸”è¿˜æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š

- ä½“ç§¯è‡ƒè‚¿
- å†…å­˜å ç”¨é«˜
- ç¨‹åºçš„æ€§èƒ½ä¹Ÿä¼šå—åˆ°å½±å“

äºæ˜¯å°±äº§ç”Ÿäº† Dockerï¼ŒDockerä¸è™šæ‹Ÿæœºéå¸¸ç±»ä¼¼ï¼Œä½†å´è½»é‡å¾ˆå¤šï¼Œå®ƒä¸ä¼šå»æ¨¡æ‹Ÿåº•å±‚çš„ç¡¬ä»¶ï¼Œåªä¼šä¸ºæ¯ä¸€ä¸ªåº”ç”¨æä¾›å®Œå…¨éš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¯å¢ƒä¸­é…ç½®ä¸åŒçš„å·¥å…·è½¯ä»¶ï¼Œå¹¶ä¸”ä¸åŒç¯å¢ƒä¹‹é—´ç›¸äº’ä¸å½±å“ï¼Œè¿™ä¸ªç¯å¢ƒå°±æ˜¯ Docker ä¸­çš„ container å®¹å™¨ã€‚

## Docker ä¸­å››ä¸ªé‡è¦æ¦‚å¿µ

1. Docker fileï¼šå°±åƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå®ƒä¸»è¦è¢«ç”¨æ¥åˆ›å»ºé•œåƒï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬åœ¨è™šæ‹Ÿæœºå®‰è£…æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼Œé€šè¿‡ Docker file è¿™ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬å®Œæˆäº†å®‰è£…è¿‡ç¨‹ï¼Œä¸éœ€è¦å†æ‰‹åŠ¨æ“ä½œ
2. é•œåƒï¼ˆImageï¼‰ï¼šDocker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªè™šæ‹Ÿæœºçš„å¿«ç…§
3. å®¹å™¨ï¼ˆContainerï¼‰ï¼šé€šè¿‡é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè®¸å¤šä¸åŒçš„ container å®¹å™¨ï¼Œè¿™é‡Œçš„å®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€å°å°è¿è¡Œèµ·æ¥çš„è™šæ‹Ÿæœºï¼Œé‡Œé¢è¿è¡Œç€åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªå®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œå®ƒä»¬ç›¸äº’ä¹‹é—´ä¸å½±å“
4. ä»“åº“ï¼ˆRepositoryï¼‰ï¼šåœ¨æœ¬åœ°åˆ¶ä½œå¥½é•œåƒåï¼Œæˆ‘ä»¬å¯ä»¥å°†é•œåƒæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆRepositoryï¼‰ã€‚ä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“å’Œç§æœ‰ä»“åº“ï¼Œæœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ Docker çš„å®˜æ–¹ä»“åº“ [Docker Hub](https://link.juejin.cn/?target=https%3A%2F%2Fhub.docker.com%2F)ã€‚è¿™ä¸€ç‚¹è·Ÿ Git å°±å¾ˆç›¸ä¼¼äº†ï¼Œæœ€å¤§çš„ Git å…¬å¼€ä»“åº“æ˜¯ GitHubã€‚

è€Œé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œ**é•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚**

## å®è·µ

ä¸‹é¢æ¼”ç¤ºéƒ½æ˜¯åŸºäº windows 11 ç¯å¢ƒ

### å®‰è£… Docker Desktop

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Windowså’ŒMacï¼Œå¯ä»¥åœ¨å®˜ç½‘ [ä¸‹è½½](https://www.docker.com/products/docker-desktop/) ä¸€ä¸ªå«åš Docker Desktop çš„åº”ç”¨ï¼Œå¹¶ä¸”åœ¨Windows 10ä»¥ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ WSL2ï¼šä¹Ÿå°±æ˜¯ Windows ä¸‹çš„ Linux å­ç³»ç»Ÿæ¥è¿è¡Œ Dockerï¼Œæˆ‘ä»¬æŒ‰ç…§ [æ–‡æ¡£](https://docs.docker.com/desktop/install/windows-install/) ä¸€æ­¥ä¸€æ­¥æ“ä½œå°±å¥½

> æ³¨æ„ï¼šè¦è¿è¡Œ Windows å®¹å™¨ï¼Œæ‚¨éœ€è¦ Windows 10 æˆ– Windows 11 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆã€‚ Windows å®¶åº­ç‰ˆæˆ–æ•™è‚²ç‰ˆä»…å…è®¸æ‚¨è¿è¡Œ Linux å®¹å™¨ã€‚

æŸ¥çœ‹ç³»ç»Ÿï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715266006417-3ebf9e6e-4495-4f63-9143-9aa5d2edfdf3.png)
windows 11ä¸“ä¸šç‰ˆç¯å¢ƒå®‰è£…æˆåŠŸé¡µé¢ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715265917277-dc44c005-1b19-4af5-ad3a-a69a1aae5381.png)
å®‰è£…å®Œæˆäº†ï¼Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤è¡Œæ£€æµ‹ä¸€ä¸‹æ˜¯å¦çœŸçš„å®‰è£…å¥½äº†ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715266676848-4012a9dc-5426-444d-a90e-23ff5daa0e22.png)
å¦‚æœä¸å¯ç”¨ï¼Œé‚£è¦è®¾ç½®ä¸‹è¿™ä¸ªï¼š
![](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715266891678-8099a21e-b0d8-43c5-9ac8-a26298c238fe.webp)
å›½å†…ä» Docker Hub æ‹‰å–é•œåƒæœ‰æ—¶ä¼šæ‹‰å–ä¸åˆ°ï¼Œå¯ä»¥é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚å¯ç”¨çš„åŠ é€Ÿå™¨å¯ä»¥å‚è€ƒï¼š[gist.github.com/y0ngb1n/7e8â€¦](https://link.juejin.cn/?target=https%3A%2F%2Fgist.github.com%2Fy0ngb1n%2F7e8f16af3242c7815e7ca2f0833d3ea6)ã€‚æˆ‘ä»¬å¯ä»¥ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715268881302-03335cab-264d-4986-ad98-7956fcd63241.png)
ä»£ç å¥‰ä¸Šï¼š

```javascript
{
  // ...
  "max-concurrent-downloads": 2,
    "max-download-attempts": 10,
    "registry-mirrors": [
    "https://dockerproxy.com",
    "https://docker.mirrors.ustc.edu.cn",
    "https://docker.nju.edu.cn"
  ]
  // ...
}
```

### ç®€å•ç†Ÿæ‚‰ Docker Desktop

å¦‚æœæ‰“å¼€åï¼Œè¿™æ ·ï¼Œè¯·å‚è€ƒï¼š[https://blog.csdn.net/weixin_43576565/article/details/134044435](https://blog.csdn.net/weixin_43576565/article/details/134044435) è§£å†³ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715269586757-54db611b-88b3-414a-8f07-4faf593fe59a.png)

æœç´¢ & æ‹‰å–é•œåƒï¼ˆéœ€è¦ğŸªœï¼‰
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715269122739-fb78cc04-feff-4ea8-bfec-526ea5994884.png)

### Docker éƒ¨ç½² Next.js é¡¹ç›®

å¦‚æœå¤§å®¶ä½¿ç”¨ VSCode ç¼–è¾‘å™¨ï¼Œå¯ä»¥å®‰è£… docker æ’ä»¶ï¼Œå®ƒèƒ½ä¸º Dockerfileå’Œ docker-compose.yml æ–‡ä»¶æä¾›äº†ä»£ç æç¤ºï¼›é€šè¿‡Docker Explorerè§†å›¾ï¼Œå¯ä»¥ç›´è§‚åœ°ç®¡ç†Dockerèµ„æºï¼Œå¦‚å®¹å™¨ã€é•œåƒã€å·ã€ç½‘ç»œå’Œå®¹å™¨æ³¨å†Œè¡¨ã€‚ç›´æ¥è¿›è¡Œå„ç§Dockeræ“ä½œï¼Œå¦‚å¯åŠ¨å’Œåœæ­¢å®¹å™¨ã€æŸ¥çœ‹æ—¥å¿—ç­‰ç­‰ è¿˜æœ‰å¾ˆå¤šå…¶ä»–èƒ½åŠ›
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715270412016-717d3746-67e0-4c15-966c-44572d606dd8.png)
è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨ VSCode ä½œä¸ºç¼–è¾‘å™¨ï¼Œä½¿ç”¨ `npx create-next-app@latest`åˆ›å»ºä¸€ä¸ª Next.js é¡¹ç›®ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå¦‚ä¸‹ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715271118824-3ad168e9-a6c3-441e-a506-ce283f98bbf3.png)
ç°åœ¨æˆ‘ä»¬ä¸ºæ­¤é¡¹ç›®æ·»åŠ  Dockerfileï¼š

1. æ ¹ç›®å½•æ–°å»º .dockerignoreï¼Œä½œç”¨ç±»ä¼¼äº .gitignoreï¼Œæ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼Œè¿™æ ·åœ¨æ„å»º Docker é•œåƒæ—¶ï¼Œå°±å¯ä»¥å‡å°é•œåƒå¤§å°å¹¶æé«˜æ„å»ºæ•ˆç‡ã€‚æˆ‘ä»¬å†™å…¥ï¼š

```bash
Dockerfile
.dockerignore
node_modules
npm-debug.log
README.md
.next
docker
.git
```

2. æ ¹ç›®å½•æ–°å»º Dockerfileï¼Œå†™å…¥ï¼Œæ¨èä½¿ç”¨å®‰è£…äº† Docker çš„ VSCode ç¼–å†™ï¼š

```bash
FROM node:18-alpine
WORKDIR /app
COPY . .
RUN npm install --registry=https://registry.npmmirror.com && npm run build
CMD npm start
EXPOSE 3000
```

Dockerfile æ˜¯ç”¨äº**å®šåˆ¶é•œåƒæ–‡ä»¶çš„æ–‡æœ¬æ–‡ä»¶ã€‚å…¶å†…çš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€å¥æŒ‡ä»¤ã€‚**å®Œæ•´çš„æŒ‡ä»¤å’Œå…¶å«ä¹‰å¯æŸ¥ [æ–‡æ¡£](https://docs.docker.com/engine/reference/builder/#dockerfile-reference)ã€‚ç®€å•è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™æ®µä»£ç ï¼š

- `FROM` ç”¨äºæŒ‡å®šåŸºç¡€é•œåƒã€‚æ‰€è°“å®šåˆ¶é•œåƒï¼Œé‚£ä¸€å®šæ˜¯ä»¥ä¸€ä¸ªé•œåƒä¸ºåŸºç¡€ï¼Œåœ¨å…¶ä¸Šè¿›è¡Œå®šåˆ¶ã€‚è€Œ `FROM` å°±æ˜¯æŒ‡å®š åŸºç¡€é•œåƒï¼Œå› æ­¤ä¸€ä¸ª Dockerfile ä¸­** FROM æ˜¯å¿…å¤‡çš„æŒ‡ä»¤**ï¼Œ**å¹¶ä¸”å¿…é¡»æ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤**ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹© node:18-alpine æ˜¯å‚è€ƒäº† Next.js çš„å®˜æ–¹ [ Docker ç¤ºä¾‹ä»£ç ](https://github.com/vercel/next.js/tree/canary/examples/with-docker)ã€‚
- `WORKDIR` ç”¨äºæŒ‡å®š**ä¹‹åæ‰€æœ‰ Docker å‘½ä»¤çš„å·¥ä½œè·¯å¾„**ã€‚å¦‚è¯¥ç›®å½•ä¸å­˜åœ¨ï¼ŒWORKDIR ä¼šå¸®ä½ å»ºç«‹ç›®å½•ã€‚
- `COPY` ç”¨äºå°†æ–‡ä»¶æ‹·è´åˆ° Dockerã€‚**ç¬¬ä¸€ä¸ªç‚¹è¡¨ç¤ºæœ¬åœ°è·¯å¾„ï¼Œç¬¬äºŒä¸ªç‚¹è¡¨ç¤ºç›®æ ‡è·¯å¾„**ã€‚ç›®æ ‡è·¯å¾„å¯ä»¥æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œæ„æ€æ˜¯ï¼šå°†å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ° /appä¸‹ã€‚
- RUN ç”¨äºæ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»»æ„ shell å‘½ä»¤ã€‚è¿™é‡Œæˆ‘ä»¬å®‰è£…äº†é¡¹ç›®ä¾èµ–ã€‚
- CMD ç”¨äºæŒ‡å®š**å®¹å™¨**å¯åŠ¨å‘½ä»¤ã€‚**RUN å¯ä»¥æœ‰å¤šä¸ªï¼Œåœ¨é•œåƒæ„å»ºé˜¶æ®µæ‰§è¡Œ**ã€‚**CMD åªèƒ½æœ‰ä¸€ä¸ªï¼Œåœ¨å®¹å™¨å¯åŠ¨åæ‰§è¡Œ**ã€‚å‰é¢è¯´åˆ°ï¼Œå®¹å™¨å°±æ˜¯è¿›ç¨‹ã€‚æ—¢ç„¶æ˜¯è¿›ç¨‹ï¼Œé‚£ä¹ˆåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šæ‰€è¿è¡Œçš„ç¨‹åºåŠå‚æ•°ã€‚CMD æŒ‡ä»¤å°±æ˜¯ç”¨äºæŒ‡å®šé»˜è®¤çš„å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤çš„ã€‚
- EXPOSE ç”¨äºå£°æ˜å®¹å™¨è¿è¡Œæ—¶æä¾›æœåŠ¡çš„ç«¯å£ã€‚ä¸è¿‡**è¿™åªæ˜¯ä¸€ä¸ªå£°æ˜**ï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡ã€‚ä½†å¯ä»¥å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£è¿™ä¸ªé•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œä»¥æ–¹ä¾¿é…ç½®æ˜ å°„ã€‚

è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œå‘½ä»¤`docker image build -t next-docker-learn-demo:0.0.1 .`ï¼Œæ„å»ºé•œåƒæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715348264267-58e561be-a536-401b-b0b6-e6400573d99d.png)
è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ„å»ºå‚æ•°ï¼š
-t å‚æ•°ç”¨æ¥æŒ‡å®šé•œåƒæ–‡ä»¶çš„åå­—ï¼Œåé¢è¿˜å¯ä»¥ç”¨**å†’å·æŒ‡å®šæ ‡ç­¾**ã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤çš„æ ‡ç­¾å°±æ˜¯ latestã€‚**æœ€åé¢è¿˜æœ‰ä¸€ä¸ª . ä¸èƒ½çœç•¥ï¼Œ**å®ƒå‘Šè¯‰ Docker åº”è¯¥åœ¨å½“å‰ç›®å½•ä¸‹å¯»æ‰¾è¿™ä¸ª Dockerfile å’Œ æŒ‡å®šä¸Šä¸‹æ–‡è·¯å¾„ã€‚
ç¬¬ä¸€æ¬¡æ„å»ºä¼šæ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯åé¢ä¼šå¿«å¾ˆå¤šï¼Œå› ä¸º Dockerä¼šç¼“å­˜ä¹‹å‰çš„æ¯ä¸€ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯ Dockerä¸­çš„åˆ†å±‚ã€‚ æ„å»ºå®Œåï¼Œå¯ä»¥åœ¨ Docker å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715348348531-841eb019-3e44-4fc2-9c15-8f39cbd14686.png)
ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°æ‰§è¡Œ docker images æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715348398686-0cf72db3-a708-4b7c-957e-7428435a28aa.png)
æœ‰äº†é•œåƒï¼Œæˆ‘ä»¬ä½¿ç”¨docker run åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨å®ä¾‹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
docker run -p 4000:3000 next-docker-learn-demo:0.0.1
```

-p ç”¨äºæŒ‡å®šç«¯å£æ˜ å°„ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯å°†å®¹å™¨çš„ 3000 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 4000 ç«¯å£ï¼Œæ ¼å¼ï¼š`[å®¿ä¸»æœºç«¯å£]:[å®¹å™¨ç«¯å£]`, `next-docker-learn-demo:0.0.1`æŒ‡å®šäº†è¦ä½¿ç”¨çš„ Docker é•œåƒ

- next-docker-learn-demo æ˜¯ Docker é•œåƒçš„åç§°ã€‚
- 0.0.1 æ˜¯é•œåƒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œç”¨äºæŒ‡å®šå…·ä½“çš„ç‰ˆæœ¬

ä¹Ÿå¯ä»¥ä½¿ç”¨ Docker å®¢æˆ·ç«¯ è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦å¡«å†™ä¸€äº›å‚æ•°ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715351997214-6601e81d-e9cc-4657-b106-e1c1b7b03c62.png)
æˆ‘ä»¬æœ¬åœ°è®¿é—®ï¼š[http://localhost:4000/](http://localhost:4000/)ï¼Œå¯ä»¥çœ‹åˆ°ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715352124331-b3d953cd-7896-44fb-8f7e-c9c9615fc9f1.png)
æŸ¥çœ‹ Docker å®¢æˆ·ç«¯ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715352300114-bad9f7ec-fb78-4728-88a0-14cd97b32f01.png)
ä¹Ÿå¯ä»¥é€šè¿‡ docker ps åœ¨ç»ˆç«¯æŸ¥çœ‹ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715354945312-3a5546f8-ca35-4c2f-98e6-41b6dc3cf413.png)
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¹å¯åŠ¨çš„å®¹å™¨è¿›è¡Œå¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰æ“ä½œï¼š

```bash
# å®¹å™¨åˆ—è¡¨
docker container ls
# åœæ­¢å®¹å™¨
docker container stop container-id
# å¯åŠ¨å®¹å™¨
docker container start container-id
# é‡å¯å®¹å™¨
docker container restart container-id
# åˆ é™¤å®¹å™¨
docker container rm container-id

```

ä¸‹é¢æˆ‘ä»¬å¯ä»¥å°†é•œåƒå‘å¸ƒåˆ° Docker Hubï¼ˆå°±åƒæŠŠä»£ç å‘å¸ƒåˆ° githubï¼‰ã€‚é¦–å…ˆéœ€è¦å»[https://hub.docker.com/](https://hub.docker.com/) æ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ Docker å®¢æˆ·ç«¯è¿›è¡Œç™»å½•ï¼š![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715354324888-ed49b5b4-3871-4c25-bdad-0b70cd553975.png)
æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œ docker login ç¡®è®¤æˆ‘ä»¬ç™»å½•æˆåŠŸï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715354350699-1bd2443a-d77d-4bc9-aae8-d7cec451ea71.png)
ç°åœ¨æˆ‘ä»¬åœ¨ç»ˆç«¯æŠŠæˆ‘ä»¬çš„ `next-docker-learn-demo` å‘å¸ƒåˆ° Docker hubï¼Œ
éœ€è¦å…ˆä½¿ç”¨ `dcoker image tag` æ ‡è®°æœ¬åœ°é•œåƒï¼Œå°†å…¶å½’å…¥æŸä¸€ä»“åº“ï¼š

```bash
# æ ¼å¼å¦‚ä¸‹ï¼š
# docker image tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]
# å…¶ä¸­ snailrun160 æ˜¯æˆ‘çš„ Docker Hub è´¦æˆ·å
docker image tag next-docker-learn-demo:0.0.1 snailrun160/next-docker-learn-demo:0.0.1

```

ç„¶å`æ¨é€å…¶åˆ° Docker Hubï¼š

```bash
# æ ¼å¼å¦‚ä¸‹ï¼š
# docker image push [OPTIONS] NAME[:TAG]
docker image push snailrun160/next-docker-learn-demo:0.0.1
```

å‘å¸ƒå®Œæ¯•åï¼Œåœ¨ Docker å®¢æˆ·ç«¯çš„ Images ä¸‹çš„ Hub å¯çœ‹åˆ°ï¼š![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/blog/1715355841312-0342cecd-0d29-4dab-91a2-19a254f89f81.png)
æ¨é€åˆ° Docker Hub åï¼Œå…¶ä»–äººå°±å¯ä»¥ç›´æ¥æ‹‰å–æˆ‘çš„é•œåƒæ–‡ä»¶ï¼š

```bash
docker image pull snailrun160/next-docker-learn-demo:0.0.1
```

ç„¶åè¿è¡Œ docker run ï¼šåˆ›å»ºå®¹å™¨

```bash
docker run -p 4000:3000 next-docker-learn-demo:0.0.1
```

åˆ°è¿™é‡Œï¼Œæœ€åŸºæœ¬çš„ Docker ä½¿ç”¨å°±ç»“æŸäº†ï¼Œæ˜¯ä¸æ˜¯è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œä½†æ˜¯è¿™æ‰æ˜¯ Docker çš„å†°å±±ä¸€è§’ï¼Œæˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« è®°å½• Docker å­¦ä¹ ï¼Œå­¦å®Œååº”è¯¥å°±å¤Ÿæˆ‘ç”¨äº†ï¼

## å›é¡¾

æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å­¦åˆ°çš„çŸ¥è¯†ï¼Œ

- æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯ Dockerï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- æˆ‘ä»¬å¦‚ä½•åœ¨ç”µè„‘å®‰è£… Docker ç¯å¢ƒï¼Ÿ
- äº†è§£ Docker Desktop å’Œ VSCode Docker
- å¦‚ä½•ä½¿ç”¨ Docker è¿›è¡Œç®€å•çš„ Next.js çº¯å‰ç«¯é¡¹ç›®éƒ¨ç½²

ä¸‹ä¸€ç« ï¼Œæˆ‘ä¼šä»‹ç» Docker Compose ï¼ŒæŠŠä¸€ä¸ªå¸¦ Nginxï¼ŒRedisï¼ŒMySQLçš„é¡¹ç›®ï¼Œä½¿ç”¨ Docker Compose æ¥å¯¹å¤šä¸ªå®¹å™¨è¿›è¡Œç®¡ç†ï¼Œ

## å‚è€ƒï¼š

1. å®˜æ–¹ç½‘ç«™ï¼š[https://www.docker.com/](https://www.docker.com/)
2. Docker 10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨ï¼š [https://www.bilibili.com/video/BV1s54y1n7Ev](https://www.bilibili.com/video/BV1s54y1n7Ev/?share_source=copy_web&vd_source=baff1d303cd044521f2216d96406a3a4)
3. Docker å…¥é—¨åˆ°å®è·µï¼š[https://yeasy.gitbook.io/docker_practice](https://yeasy.gitbook.io/docker_practice)
