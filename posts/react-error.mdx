---
title: React æ–°æ‰‹å¸¸çŠ¯çš„åä¸ªé”™è¯¯
description: ä»‹ç»äº†åˆšå…¥é—¨ React çš„æ–°äººï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™é‡åˆ°ä¸€äº›å¸¸è§é—®é¢˜ï¼Œå¹¶ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆã€‚
tags: [React, bug]
slug: common-mistakes-make-react-beginners
author: luckySnail
# cover:
date: 2023-06-27
---

è¿™æ˜¯æˆ‘å…³æ³¨çš„ä¸€ä½å‰ç«¯å¼€å‘è€…çš„åˆ†äº«ï¼Œåˆ†äº«çš„éå¸¸æ£’ï¼å€¼å¾—è¢«æ›´å¤šäººçœ‹åˆ°ï¼ŒåŸæ–‡è‹±æ–‡ç‰ˆæœ¬ï¼Œæˆ‘åšäº†ç¿»è¯‘ï¼Œå¸Œæœ›å¯¹ React å¼€å‘è€…æœ‰æ‰€å¸®åŠ©ã€‚

åœ¨æˆ‘æœ€è¿‘å¼€å‘çš„æ—¶å€™ï¼Œåœ¨é‡åˆ°å¤æ‚çŠ¶æ€ç®¡ç†å’Œå‰¯ä½œç”¨çš„æ—¶å€™ï¼Œå°±ä¼šç»å¸¸ä¸èƒ½å®Œå…¨æƒ³åˆ°æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„æƒ…å†µï¼Œå¯¼è‡´ä¸€äº›è«åå…¶å¦™çš„ bugï¼Œå¦‚æœä½ ä¹Ÿæ˜¯ï¼Œé‚£çœ‹å®Œå§ï¼Œä¸€å®šæœ‰æ–°çš„æ”¶è·ã€‚ä»¥ä¸‹æ˜¯æ­£æ–‡éƒ¨åˆ†ï¼š

â€œå‡ å¹´å‰ï¼Œæˆ‘åœ¨å½“åœ°çš„ä¸€ä¸ªç¼–ç è®­ç»ƒè¥æ•™ Reactï¼Œæˆ‘æ³¨æ„åˆ°æœ‰ä¸€äº›äº‹æƒ…è®©å­¦ç”Ÿæªæ‰‹ä¸åŠã€‚äººä»¬ä¸æ–­æ‰è¿›åŒä¸€ä¸ªå‘é‡Œï¼åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ 8 ä¸ªæœ€å¸¸è§çš„é™·é˜±ã€‚æ‚¨å°†å­¦ä¹ å¦‚ä½•ç»•è¿‡å®ƒä»¬ï¼Œå¹¶å¸Œæœ›èƒ½å¤Ÿé¿å…å¾ˆå¤šæŒ«è´¥æ„Ÿã€‚ä¸ºäº†ä¿æŒè¿™ç¯‡åšå®¢æ–‡ç« è½»æ¾æµç•…ï¼Œæˆ‘ä»¬ä¸ä¼šè¿‡å¤šæ¢è®¨è¿™äº›é™·é˜±èƒŒåçš„åŸå› ã€‚è¿™æ›´åƒæ˜¯ä¸€ä¸ªå¿«é€Ÿå‚è€ƒã€‚ä¸‹é¢çœ‹ä¸‹å¸¸è§çš„é—®é¢˜å§ï¼

> ##### ç›®æ ‡å—ä¼—
>
> è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºé‚£äº›å¯¹ReactåŸºç¡€çŸ¥è¯†å·²ç»æœ‰æ‰€äº†è§£ï¼Œä½†åœ¨ä»–ä»¬çš„å­¦ä¹ æ—…ç¨‹ä¸­ä»ç„¶å¤„äºåˆçº§é˜¶æ®µçš„å¼€å‘è€…ç¼–å†™çš„ã€‚

### 1\. ä½¿ç”¨ 0 ä½œä¸ºåˆ¤æ–­ä¾æ®

å¥½çš„ï¼Œæˆ‘ä»¬ä»å…¶ä¸­ä¸€ä¸ªæœ€æ™®éçš„é™·é˜±å¼€å§‹ã€‚æˆ‘åœ¨ä¸€äº›ç”Ÿäº§åº”ç”¨ç¨‹åºä¸­å®é™…é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼

è¯·çœ‹ä¸‹ä»¥ä¸‹ä»£ç ï¼š

```
// react app.js
import React from 'react';
import ShoppingList from './ShoppingList';

function App() {
  const [items, setItems] = React.useState([]);

  return (
    <div>
      {items.length && <ShoppingList items={items} />}
    </div>
  );
}

export default App;

```

```
// ShoppingList.js
import React from 'react';

function ShoppingList({ items }) {
  return (
    <>
      <h1>Shopping List</h1>
      <ul>
        {items.map((item, index) => {
          // NOTE: We shouldn't use â€œindexâ€ as the key!
          // This is covered later in this post ğŸ˜„
          return (
            <li key={index}>
              {item}
            </li>
          );
        })}
      </ul>
    </>
  );
}

export default ShoppingList

```

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æœ‰æ¡ä»¶åœ°æ˜¾ç¤ºä¸€ä¸ªè´­ç‰©æ¸…å•ã€‚å¦‚æœæ•°ç»„ä¸­è‡³å°‘æœ‰1ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬åº”è¯¥æ¸²æŸ“ä¸€ä¸ªShoppingListå…ƒç´ ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¸åº”è¯¥æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚**ç„¶è€Œï¼Œæˆ‘ä»¬æœ€ç»ˆåœ¨ UI ä¸­å¾—åˆ°ä¸€ä¸ªéšæœºçš„ `0` ï¼**

å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸º `items.length` çš„è®¡ç®—ç»“æœä¸º `0` ã€‚ç”±äº 0 åœ¨ JavaScript ä¸­æ˜¯ä¸€ä¸ªè™šå‡å€¼ï¼Œå› æ­¤ `&&` è¿ç®—ç¬¦çŸ­è·¯ï¼Œæ•´ä¸ªè¡¨è¾¾å¼è§£æä¸º `0` ã€‚å®é™…ä¸Šï¼Œå°±å¥½åƒæˆ‘ä»¬è¿™æ ·åšäº†ä¸€æ ·ï¼š

```
function App() {
  return (
    <div>
      {0}
    </div>
  );
}

```

ä¸å…¶ä»–å‡å€¼ï¼ˆå¦‚''ã€nullã€falseç­‰ï¼‰ä¸åŒï¼Œæ•°å­—0æ˜¯JSXä¸­çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚æ¯•ç«Ÿï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¡®å®å¸Œæœ›æ‰“å°æ•°å­—0ï¼

**å¦‚ä½•ä¿®å¤ï¼š** æˆ‘ä»¬çš„è¡¨è¾¾å¼åº”è¯¥ä½¿ç”¨ä¸€ä¸ªâ€œçº¯ç²¹â€çš„å¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ï¼š

```
function App() {
  const [items, setItems] = React.useState([]);
return (
    <div>
      {items.length > 0 && (
        <ShoppingList items={items} />
      )}
    </div>
  );
}

```

`items.length > 0` å°†å§‹ç»ˆè®¡ç®—ä¸º `true` æˆ– `false` ï¼Œå› æ­¤æˆ‘ä»¬æ°¸è¿œä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ï¼š

```
function App() {
  const [items, setItems] = React.useState([]);
return (
    <div>
      {items.length
        ? <ShoppingList items={items} />
        : null}
    </div>
  );
}

```

è¿™ä¸¤ç§é€‰æ‹©éƒ½æ˜¯å®Œå…¨æœ‰æ•ˆçš„ï¼Œè¿™å–å†³äº**ä¸ªäººå“å‘³**ã€‚

### 2\. ä¸æ­£ç¡®ä½¿ç”¨çŠ¶æ€

è®©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨æˆ‘ä»¬çš„è´­ç‰©æ¸…å•ç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬èƒ½å¤Ÿæ·»åŠ æ–°é¡¹ç›®ï¼š

```
// app.js
import React from 'react';
import ShoppingList from './ShoppingList';
import NewItemForm from './NewItemForm';

function App() {
  const [items, setItems] = React.useState([
    'apple',
    'banana',
  ]);

  function handleAddItem(value) {
    items.push(value);
    setItems(items);
  }

  return (
    <div>
      {items.length > 0 && <ShoppingList items={items} />}
      <NewItemForm handleAddItem={handleAddItem} />
    </div>
  )
}

export default App;

```

```
// ShoppingList.js
import React from 'react';

function ShoppingList({ items }) {
  return (
    <>
      <h1>Shopping List</h1>
      <ul>
        {items.map((item, index) => {
          // NOTE: We shouldn't use â€œindexâ€ as the key!
          // This is covered later in this post ğŸ˜„
          return (
            <li key={index}>
              {item}
            </li>
          );
        })}
      </ul>
    </>
  );
}

export default ShoppingList;

```

```
// NewItemFrom.js
import React from 'react';

function NewItemForm({ handleAddItem }) {
  const [value, setValue] = React.useState('');

  return (
    <form
      onSubmit={(event) => {
        event.preventDefault();

        handleAddItem(value);
        setValue('');
      }}
    >
      {/* We'll touch on this ID stuff later too! */}
      <label htmlFor="new-item-input">
        Item:
      </label>
      <input
        value={value}
        onChange={event => setValue(event.target.value)}
      />
      <button>
        Add Item
      </button>
    </form>
  );
}

export default NewItemForm;

```

å¯çœ‹åˆ°å¦‚ä¸‹ï¼š

![image-20230623130414761](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/3bf4b338ff594eeeb865752f4f9daf31~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

æ¯å½“ç”¨æˆ·æäº¤ä¸€ä¸ªæ–°é¡¹ç›®æ—¶ï¼Œ`handleAddItem`å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒç›®å‰æ— æ³•æ­£å¸¸å·¥ä½œï¼å½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªé¡¹ç›®å¹¶æäº¤è¡¨å•æ—¶ï¼Œè¯¥é¡¹ç›®å¹¶æ²¡æœ‰è¢«æ·»åŠ åˆ°è´­ç‰©æ¸…å•ä¸­ã€‚

**é—®é¢˜** å‡ºåœ¨æˆ‘ä»¬è¿åäº†Reactä¸­å¯èƒ½æ˜¯æœ€é‡è¦çš„è§„åˆ™ä¹‹ä¸€ï¼šæˆ‘ä»¬ä¿®æ”¹äº†**çŠ¶æ€**çš„å€¼ã€‚å…·ä½“æ¥è¯´ï¼Œé—®é¢˜æ˜¯è¿™ä¸€è¡Œï¼š

```
// app.js
function handleAddItem(value) {
  items.push(value);
  setItems(items);
}

```

React ä¾é **çŠ¶æ€å˜é‡çš„èº«ä»½**ï¼ˆä¹Ÿå°±æ˜¯è¿™é‡Œçš„ useState hooksï¼‰æ¥åˆ¤æ–­çŠ¶æ€ä½•æ—¶å‘ç”Ÿäº†å˜åŒ–ã€‚å½“æˆ‘ä»¬æŠŠä¸€ä¸ªé¡¹ç›®æ¨åˆ°æ•°ç»„ä¸­æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šæ”¹å˜è¯¥æ•°ç»„çš„èº«ä»½ï¼Œæ‰€ä»¥ React æ— æ³•åˆ¤æ–­è¿™ä¸ªå€¼å·²ç»æ”¹å˜ã€‚

**å¦‚ä½•ä¿®å¤ï¼š** æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„åšæ³•ï¼š

```
// app.js
function handleAddItem(value) {
  const nextItems = [...items, value]; // ä¸çŸ¥é“æœ‰äººçœ‹è¿‡æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸ï¼Œè¿™é‡Œä¹Ÿæ˜¯éµå®ˆ react çš„ä¸å¯å˜æ€§åŸåˆ™
  setItems(nextItems);
}

```

ä¸å…¶ä¿®æ”¹ç°æœ‰çš„æ•°ç»„ï¼Œæˆ‘é€‰æ‹©ä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™ä¸ªæ–°æ•°ç»„åŒ…å«äº†ä¸åŸæ•°ç»„å®Œå…¨ç›¸åŒçš„æ‰€æœ‰é¡¹ï¼ˆå€ŸåŠ©å±•å¼€è¯­æ³•...ï¼‰ï¼Œä»¥åŠæ–°æ·»åŠ çš„é¡¹ã€‚è¿™é‡Œçš„åŒºåˆ«åœ¨äº**ä¿®æ”¹ç°æœ‰é¡¹**ä¸**åˆ›å»ºæ–°é¡¹**ä¹‹é—´çš„å·®å¼‚ã€‚å½“æˆ‘ä»¬å°†ä¸€ä¸ªå€¼ä¼ é€’ç»™åƒ setCount è¿™æ ·çš„**çŠ¶æ€è®¾ç½®å‡½æ•°**æ—¶ï¼Œå®ƒéœ€è¦æ˜¯ä¸€ä¸ª**æ–°çš„å®ä½“**ã€‚**å¯¹è±¡ä¹Ÿæ˜¯å¦‚æ­¤ï¼š**

```
// âŒ Mutates an existing object
function handleChangeEmail(nextEmail) {
  user.email = nextEmail;
  setUser(user);
}
// âœ… Creates a new object
function handleChangeEmail(email) {
  const nextUser = { ...user, email: nextEmail };
  setUser(nextUser);
}

```

åŸºæœ¬ä¸Šï¼Œ... è¯­æ³•æ˜¯ä¸€ç§å°†æ•°ç»„/å¯¹è±¡ä¸­çš„æ‰€æœ‰å†…å®¹å¤åˆ¶/ç²˜è´´åˆ°å…¨æ–°å®ä½“ä¸­çš„æ–¹å¼ã€‚è¿™ç¡®ä¿ä¸€åˆ‡æ­£å¸¸è¿ä½œã€‚

### 3\. ä¸ç”Ÿæˆå¯†é’¥

ä»¥ä¸‹æ˜¯æ‚¨ä¹‹å‰å¯èƒ½çœ‹åˆ°çš„è­¦å‘Šï¼š

> Warning: Each child in a list should have a unique "key" prop.
>
> è­¦å‘Šï¼šåˆ—è¡¨ä¸­çš„æ¯ä¸ªå­å…ƒç´ åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ "key" å±æ€§ã€‚

æœ€å¸¸è§çš„æƒ…å†µæ˜¯åœ¨å¯¹æ•°æ®è¿›è¡Œæ˜ å°„æ—¶å‘ç”Ÿæ­¤é”™è¯¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¿åæ­¤è§„åˆ™çš„ç¤ºä¾‹ï¼š

```
// app.js
import React from 'react';
import ShoppingList from './ShoppingList';
import NewItemForm from './NewItemForm';

function App() {
  const [items, setItems] = React.useState([
    'apple',
    'banana',
    'carrot',
  ]);

  function handleAddItem(value) {
    const nextItems = [...items, value]
    setItems(nextItems);
  }

  return (
    <div>
      {items.length > 0 && <ShoppingList items={items} />}
      <NewItemForm handleAddItem={handleAddItem} />
    </div>
  )
}

export default App;

```

```
// ShoppingList.js
import React from 'react';

function ShoppingList({ items }) {
  return (
    <ul>
      {items.map((item) => {
        return (
          <li>{item}</li>
        );
      })}
    </ul>
  );
}

export default ShoppingList;

```

```
// NewItemForm.js
import React from 'react';
function NewItemForm({ handleAddItem }) {
  const [value, setValue] = React.useState('');

  return (
    <form
      onSubmit={(event) => {
        event.preventDefault();

        handleAddItem(value);
        setValue('');
      }}
    >
      {/* We'll touch on this ID stuff later too! */}
      <label htmlFor="new-item-input">
        Item:
      </label>
      <input
        value={value}
        onChange={event => setValue(event.target.value)}
      />
      <button>
        Add Item
      </button>
    </form>
  );
}

export default NewItemForm;

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623132957917](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/bac5be80c2d04ca3a30266874079e80a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

æ¯å½“æˆ‘ä»¬æ¸²æŸ“ä¸€ä¸ªå…ƒç´ æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸º React æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿè¯†åˆ«æ¯ä¸ªé¡¹ã€‚å…³é”®æ˜¯ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦éœ€è¦æ˜¯å”¯ä¸€çš„ã€‚è®¸å¤šåœ¨çº¿èµ„æºä¼šå»ºè®®ä½¿ç”¨æ•°ç»„ç´¢å¼•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```
// ShoppingList.js
function ShoppingList({ items }) {
  return (
    <ul>
      {items.map((item, index) => {
        return (
          <li key={index}>{item}</li>
        );
      })}
    </ul>
  );
}

```

æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¥½çš„å»ºè®®ã€‚è¿™ç§æ–¹æ³•æœ‰æ—¶å¯ä»¥å·¥ä½œï¼Œä½†åœ¨å…¶ä»–æƒ…å†µä¸‹å¯èƒ½ä¼šå¼•å‘ä¸€äº›ä¸¥é‡çš„é—®é¢˜ã€‚éšç€å¯¹ React å·¥ä½œåŸç†çš„æ›´æ·±å…¥ç†è§£ï¼Œæ‚¨å°†èƒ½å¤Ÿåœ¨æ¯ä¸ªå…·ä½“æƒ…å†µä¸‹åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½†è€å®è¯´ï¼Œæˆ‘è®¤ä¸ºä»¥ä¸€ç§å§‹ç»ˆå®‰å…¨çš„æ–¹å¼è§£å†³é—®é¢˜ä¼šæ›´å®¹æ˜“ã€‚è¿™æ ·ï¼Œæ‚¨å°±ä¸å¿…æ‹…å¿ƒå®ƒï¼

**ä¸‹é¢æ˜¯è®¡åˆ’ï¼š** æ¯å½“å‘åˆ—è¡¨ä¸­æ·»åŠ æ–°é¡¹æ—¶ï¼Œæˆ‘ä»¬å°†ä¸ºå…¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDï¼š

```
// app.js
function handleAddItem(value) {
  const nextItem = {
    id: crypto.randomUUID(),
    label: value,
  };
  const nextItems = [...items, nextItem];
  setItems(nextItems);
}

```

`crypto.randomUUID`æ˜¯å†…ç½®äºæµè§ˆå™¨ä¸­çš„æ–¹æ³•ï¼ˆå®ƒä¸æ˜¯ç¬¬ä¸‰æ–¹åŒ…ï¼‰ã€‚å®ƒåœ¨æ‰€æœ‰ä¸»è¦æµè§ˆå™¨ä¸­éƒ½å¯ç”¨ã€‚å®ƒä¸åŠ å¯†è´§å¸æ— å…³ã€‚è¯¥æ–¹æ³•ç”Ÿæˆä¸€ä¸ªç±»ä¼¼äº `d9bb3c4c-0459-48b9-a94c-7ca3963f7bd0` çš„å”¯ä¸€å­—ç¬¦ä¸²ã€‚é€šè¿‡åœ¨ç”¨æˆ·æäº¤è¡¨å•æ—¶åŠ¨æ€ç”Ÿæˆä¸€ä¸ª IDï¼Œæˆ‘ä»¬ç¡®ä¿è´­ç‰©æ¸…å•ä¸­çš„æ¯ä¸ªé¡¹éƒ½å…·æœ‰å”¯ä¸€çš„ IDã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•å°†å…¶åº”ç”¨ä¸ºé”®çš„æ–¹æ³•ï¼š

```
// ShoppingList.js
function ShoppingList({ items }) {
  return (
    <ul>
      {items.map((item, index) => {
        return (
          <li key={item.id}>
            {item.label}
          </li>
        );
      })}
    </ul>
  );
}

```

é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨çŠ¶æ€æ›´æ–°æ—¶ç”ŸæˆIDï¼Œè€Œä¸æ˜¯è¿™æ ·åšï¼š

```
// âŒ This is a bad idea
<li key={crypto.randomUUID()}>
  {item.label}
</li>

```

åœ¨ JSX ä¸­è¿™æ ·ç”Ÿæˆä¼šå¯¼è‡´é”®åœ¨**æ¯æ¬¡æ¸²æŸ“æ—¶å‘ç”Ÿå˜åŒ–**ã€‚å½“é”®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReactå°†é”€æ¯å¹¶é‡æ–°åˆ›å»ºè¿™äº›å…ƒç´ ï¼Œè¿™å¯èƒ½å¯¹**æ€§èƒ½äº§ç”Ÿé‡å¤§è´Ÿé¢å½±å“**ã€‚è¿™ç§æ¨¡å¼â€”â€”åœ¨åˆ›å»ºæ•°æ®æ—¶ç”Ÿæˆé”®â€”â€”å¯ä»¥åº”ç”¨äºå„ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨ä»æœåŠ¡å™¨è·å–æ•°æ®æ—¶åˆ›å»ºå”¯ä¸€IDçš„æ–¹å¼ï¼š

```
const [data, setData] = React.useState(null);
async function retrieveData() {
  const res = await fetch('/api/data');
  const json = await res.json();
  // The moment we have the data, we generate
  // an ID for each item:
  const dataWithId = json.data.map(item => {
    return {
      ...item,
      id: crypto.randomUUID(),
    };
  });
  // Then we update the state with
  // this augmented data:
  setData(dataWithId);
}

```

### 4\. ç¼ºå°‘ç©ºæ ¼

è¿™æ˜¯æˆ‘åœ¨ç½‘ç»œä¸Šç»å¸¸çœ‹åˆ°çš„ä¸€ä¸ªéå¸¸è®©äººå›°æƒ‘çš„é—®é¢˜ã€‚

```
import React from 'react';

function App() {
  return (
    <p>
      Welcome to Corpitech.com!
      <a href="/login">Log in to continue</a>
    </p>
  );
}

export default App;

```

ä½ ä¼šçœ‹åˆ°ï¼š![image-20230623133756836](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/24ad0c9df1d14578b7edb81c0b88607a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

æ³¨æ„åˆ°è¿™ä¸¤ä¸ªå¥å­è¢«æ··åœ¨ä¸€èµ·äº†ï¼š

![image-20230623133859746](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/d199f5422dc04f3099300fb8a46e56de~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

è¿™æ˜¯å› ä¸º **JSX ç¼–è¯‘å™¨**ï¼ˆå°†æˆ‘ä»¬ç¼–å†™çš„ JSX è½¬æ¢ä¸ºé€‚ç”¨äºæµè§ˆå™¨çš„ JavaScript çš„å·¥å…·ï¼‰**æ— æ³•çœŸæ­£åŒºåˆ†è¯­æ³•ä¸Šçš„ç©ºæ ¼å’Œæˆ‘ä»¬ä¸ºç¼©è¿›/ä»£ç å¯è¯»æ€§è€Œæ·»åŠ çš„ç©ºæ ¼**ã€‚

**å¦‚ä½•ä¿®å¤å®ƒï¼š** æˆ‘ä»¬éœ€è¦åœ¨æ–‡æœ¬å’Œé”šç‚¹æ ‡è®°ä¹‹é—´æ·»åŠ ä¸€ä¸ª**æ˜¾å¼çš„ç©ºæ ¼å­—ç¬¦**ï¼š

```
<p>
  Welcome to Corpitech.com!
  {' '}
  <a href="/login">Log in to continue</a>
</p>

```

ä¸€ä¸ªå°å°çš„ä¸“ä¸šæŠ€å·§ï¼šå¦‚æœæ‚¨ä½¿ç”¨ `Prettier`ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸ºæ‚¨æ·»åŠ è¿™äº›ç©ºæ ¼å­—ç¬¦ï¼åªéœ€ç¡®ä¿è®©å®ƒè¿›è¡Œæ ¼å¼åŒ–ï¼ˆä¸è¦æå‰å°†å†…å®¹æ‹†åˆ†ä¸ºå¤šè¡Œï¼‰ã€‚

> ä¸ºä»€ä¹ˆ React å›¢é˜Ÿæ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ
>
> å½“æˆ‘ç¬¬ä¸€æ¬¡äº†è§£åˆ°è¿™ç§ç­–ç•¥æ—¶ï¼Œæˆ‘ä¹Ÿè§‰å¾—æœ‰äº›å‡Œä¹±ã€‚ä¸ºä»€ä¹ˆ React å›¢é˜Ÿä¸èƒ½ä¿®å¤å®ƒï¼Œä½¿å…¶æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸå·¥ä½œå‘¢ï¼Ÿï¼æˆ‘åæ¥æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜å¹¶æ²¡æœ‰å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœ React å¼€å§‹å°†ç¼©è¿›è§£é‡Šä¸ºè¯­æ³•ä¸Šçš„ç©ºæ ¼ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†ä¹Ÿä¼šå¼•å…¥ä¸€ç³»åˆ—å…¶ä»–é—®é¢˜ã€‚æœ€ç»ˆï¼Œå°½ç®¡å®ƒçœ‹èµ·æ¥æœ‰äº›ç¬¨æ‹™ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ˜¯æ­£ç¡®çš„å†³å®šã€‚è¿™æ˜¯æœ€ä¸ç³Ÿç³•çš„é€‰æ‹©ï¼

### 5\. åœ¨ä¿®æ”¹çŠ¶æ€åè®¿é—®å®ƒ

è¿™ä¸ªé—®é¢˜åœ¨æŸä¸ªæ—¶åˆ»éƒ½ä¼šè®©äººæªæ‰‹ä¸åŠã€‚åœ¨æˆ‘åœ¨ä¸€å®¶æœ¬åœ°ç¼–ç¨‹è®­ç»ƒè¥æ•™æˆæ—¶ï¼Œæˆ‘å·²ç»è®°ä¸æ¸…æœ‰å¤šå°‘æ¬¡æœ‰äººå› ä¸ºè¿™ä¸ªé—®é¢˜å‘æˆ‘æ±‚åŠ©äº†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„è®¡æ•°å™¨åº”ç”¨ç¨‹åºï¼šç‚¹å‡»æŒ‰é’®ä¼šå¢åŠ è®¡æ•°ã€‚çœ‹çœ‹ä½ èƒ½å¦å‘ç°é—®é¢˜æ‰€åœ¨ï¼š

```
import React from 'react';

function App() {
  const [count, setCount] = React.useState(0);

  function handleClick() {
    setCount(count + 1);

    console.log({ count });
  }

  return (
    <button onClick={handleClick}>
      {count}
    </button>
  );
}

export default App;

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623134419724](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/dba119edd43b4c6b815cc6f970ced7d5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

åœ¨å¢åŠ è®¡æ•°çŠ¶æ€å˜é‡åï¼Œæˆ‘ä»¬å°†å…¶å€¼è®°å½•åˆ°æ§åˆ¶å°ã€‚ä»¤äººå¥‡æ€ªçš„æ˜¯ï¼Œå®ƒè®°å½•äº†é”™è¯¯çš„å€¼ï¼š

![image-20230623134525645](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/f63ae0958c8748dfb21f089eb9903445~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

é—®é¢˜å‡ºåœ¨è¿™é‡Œï¼šReact ä¸­çš„çŠ¶æ€è®¾ç½®å‡½æ•°ï¼ˆä¾‹å¦‚ setCountï¼‰æ˜¯å¼‚æ­¥çš„ã€‚ è¿™æ˜¯æœ‰é—®é¢˜çš„ä»£ç æ˜¯è¿™é‡Œï¼š

```
function handleClick() {
  setCount(count + 1);
  console.log({ count });
}

```

å¾ˆå®¹æ˜“é”™è¯¯åœ°è®¤ä¸º setCount å‡½æ•°ç±»ä¼¼äºèµ‹å€¼ï¼Œå¥½åƒè¿™æ ·åšæ˜¯ç­‰åŒäºè¿™æ ·çš„æ“ä½œï¼š

```
count = count + 1;
console.log({ count });

```

ç„¶è€Œï¼ŒReact å¹¶ä¸æ˜¯è¿™æ ·æ„å»ºçš„ã€‚å½“æˆ‘ä»¬è°ƒç”¨ setCount æ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰é‡æ–°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œè€Œæ˜¯å®‰æ’äº†ä¸€ä¸ªæ›´æ–°æ“ä½œã€‚

å¯¹äºæˆ‘ä»¬å®Œå…¨ç†è§£è¿™ä¸ªæ¦‚å¿µå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œä½†ä¸‹é¢çš„è§£é‡Šæˆ–è®¸æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£ï¼šæˆ‘ä»¬æ— æ³•é‡æ–°èµ‹å€¼ç»™ count å˜é‡ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡ï¼

```
// Uses `const`, not `let`, and so it can't be reassigned
const [count, setCount] = React.useState(0);
count = count + 1; // Uncaught TypeError:
                   // Assignment to constant variable

```

é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“è¿™ä¸ªå€¼åº”è¯¥æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬éœ€è¦å°†å®ƒå­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è®¿é—®å®ƒï¼š

```
function handleClick() { // å†æ¬¡éªŒè¯ä¸å¯å˜æ€§é‡è¦æ€§ï¼Œä½¿ç”¨æ–°çš„å˜é‡è®°å½•æœ€æ–°çš„çŠ¶æ€
  const nextCount = count + 1;
  setCount(nextCount);
  // Use `nextCount` whenever we want
  // to reference the new value:
  console.log({ nextCount });
}

```

æˆ‘å–œæ¬¢åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨â€œnextâ€å‰ç¼€ï¼ˆæ¯”å¦‚nextCountã€nextItemsã€nextEmailç­‰ï¼‰ã€‚è¿™æ ·å¯¹æˆ‘æ¥è¯´æ›´æ¸…æ™°ï¼Œæˆ‘ä»¬ä¸æ˜¯æ›´æ–°å½“å‰å€¼ï¼Œè€Œæ˜¯å®‰æ’ä¸‹ä¸€ä¸ªå€¼ã€‚

### 6\. è¿”å›å¤šä¸ªå…ƒç´ 

æœ‰æ—¶ï¼Œä¸€ä¸ªç»„ä»¶éœ€è¦è¿”å›å¤šä¸ªé¡¶çº§å…ƒç´ ã€‚ä¾‹å¦‚ï¼š

```
// app.js
import React from 'react';
import LabeledInput from './LabeledInput';

function App() {
  const [name, setName] = React.useState('');

  return (
    <LabeledInput
      id="name"
      label="Your name"
      value={name}
      onChange={(event) => setName(event.target.value)}
    />
  );
}

export default App;

```

```
// LabeledInput.js
function LabeledInput({ id, label, ...delegated }) {
  return (
    <label htmlFor={id}>
      {label}
    </label>
    <input
      id={id}
      {...delegated}
    />
  );
}

export default LabeledInput;

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623135153465](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/cadab96d750449c6bf52be148e09b3d4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ LabeledInput ç»„ä»¶è¿”å›ä¸¤ä¸ªå…ƒç´ ï¼šä¸€ä¸ª `<label>` å’Œä¸€ä¸ª `<input>`ã€‚ä»¤äººæ²®ä¸§çš„æ˜¯ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼š

![image-20230623135238318](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/b802f8d28d4f48d19710a90aa35820cb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

è¿™æ˜¯å› ä¸º JSX ç¼–è¯‘ä¸ºæ™®é€šçš„ JavaScriptã€‚ä¸‹é¢æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ—¶è¿™æ®µä»£ç çš„æ ·å­ï¼š

```
function LabeledInput({ id, label, ...delegated }) {
  return (
    React.createElement('label', { htmlFor: id }, label)
    React.createElement('input', { id: id, ...delegated })
  );
}

```

åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½åƒè¿™æ ·è¿”å›å¤šä¸ªå€¼ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ç§å†™æ³•ä¸èµ·ä½œç”¨çš„åŸå› ï¼š

```
function addTwoNumbers(a, b) {
  return (
    "the answer is"
    a + b
  );
}

```

æˆ‘ä»¬è¯¥å¦‚ä½•ä¿®å¤å‘¢ï¼Ÿå¾ˆé•¿ä¸€æ®µæ—¶é—´ä»¥æ¥ï¼Œæ ‡å‡†åšæ³•æ˜¯å°†è¿™ä¸¤ä¸ªå…ƒç´ åŒ…è£…åœ¨ä¸€ä¸ªåŒ…è£¹æ ‡ç­¾ä¸­ï¼Œæ¯”å¦‚ `<div>`ï¼š

```
function LabeledInput({ id, label, ...delegated }) {
  return (
    <div>
      <label htmlFor={id}>
        {label}
      </label>
      <input
        id={id}
        {...delegated}
      />
    </div>
  );
}

```

é€šè¿‡å°† `<label>` å’Œ `<input>` åŒ…è£…åœ¨ `<div>` ä¸­ï¼Œæˆ‘ä»¬åªè¿”å›ä¸€ä¸ªé¡¶å±‚å…ƒç´ ï¼ä»¥ä¸‹æ˜¯å®ƒåœ¨æ™®é€šçš„ JavaScript ä¸­çš„æ ·å­ï¼š

```
function LabeledInput({ id, label, ...delegated }) {
  return React.createElement(
    'div',
    {},
    React.createElement('label', { htmlFor: id }, label),
    React.createElement('input', { id: id, ...delegated })
  );
}

```

JSX æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æŠ½è±¡ï¼Œä½†å®ƒå¸¸å¸¸ä¼šæ©ç›–å…³äº JavaScript çš„åŸºæœ¬çœŸç†ã€‚æˆ‘è®¤ä¸ºï¼ŒæŸ¥çœ‹ JSX å¦‚ä½•è½¬æ¢ä¸ºæ™®é€šçš„ JavaScriptï¼Œä»¥äº†è§£å®é™…å‘ç”Ÿçš„æƒ…å†µå¾€å¾€æ˜¯æœ‰å¸®åŠ©çš„ã€‚é€šè¿‡è¿™ç§æ–°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿”å›ä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œè€Œè¯¥å…ƒç´ åŒ…å«ä¸¤ä¸ªå­å…ƒç´ ã€‚é—®é¢˜è§£å†³äº†ï¼ä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰‡æ®µï¼ˆfragmentsï¼‰è¿›ä¸€æ­¥æ”¹è¿›è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼š

```
function LabeledInput({ id, label, ...delegated }) {
  return (
    <React.Fragment>
      <label htmlFor={id}>
        {label}
      </label>
      <input
        id={id}
        {...delegated}
      />
    </React.Fragment>
  );
}

```

`React.Fragment`æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„Reactç»„ä»¶ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†å¤šä¸ªé¡¶çº§å…ƒç´ æ†ç»‘åœ¨ä¸€èµ·ï¼Œè€Œä¸ä¼šå½±å“DOMã€‚è¿™éå¸¸æ£’ï¼šè¿™æ„å‘³ç€æˆ‘ä»¬ä¸ä¼šåœ¨æ ‡è®°ä¸­åŠ å…¥ä¸å¿…è¦çš„`<div>`ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªä¾¿æ·çš„ç®€å†™æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·ç¼–å†™ç‰‡æ®µï¼š

```
function LabeledInput({ id, label, ...delegated }) {
  return (
    <>
      <label htmlFor={id}>
        {label}
      </label>
      <input
        id={id}
        {...delegated}
      />
    </>
  );
}

```

æˆ‘å–œæ¬¢è¿™é‡Œçš„ç¬¦å·æ„ä¹‰ï¼šReactå›¢é˜Ÿé€‰æ‹©ä½¿ç”¨ä¸€ä¸ªç©ºçš„HTMLæ ‡ç­¾`<>`æ¥è¡¨ç¤ºç‰‡æ®µä¸ä¼šäº§ç”Ÿä»»ä½•å®é™…çš„æ ‡è®°ã€‚

### 7\. ä»ä¸å—æ§åˆ¶å˜ä¸ºå—æ§åˆ¶çŠ¶æ€

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…¸å‹çš„è¡¨å•ç¤ºä¾‹ï¼Œå°†ä¸€ä¸ªè¾“å…¥ä¸ReactçŠ¶æ€ç»‘å®šèµ·æ¥ï¼š

```
import React from 'react';

function App() {
  const [email, setEmail] = React.useState();

  return (
    <form>
      <label htmlFor="email-input">
        Email address
      </label>
      <input
        id="email-input"
        type="email"
        value={email}
        onChange={event => setEmail(event.target.value)}
      />
    </form>
  );
}

export default App;

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623140328986](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/82b13e18fb9a4749a83c20c557b3449c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

å¦‚æœä½ åœ¨è¿™ä¸ªè¾“å…¥æ¡†ä¸­å¼€å§‹è¾“å…¥ï¼Œä½ ä¼šæ³¨æ„åˆ°æ§åˆ¶å°ä¸Šä¼šå‡ºç°ä¸€ä¸ªè­¦å‘Šï¼š

![image-20230623140357471](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/78399c44527746348f9be53bcfab3cd2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼šæˆ‘ä»¬éœ€è¦å°† `email` çŠ¶æ€åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ï¼š

```
const [email, setEmail] = React.useState('');

```

å½“æˆ‘ä»¬è®¾ç½®valueå±æ€§æ—¶ï¼Œæˆ‘ä»¬å‘Šè¯‰ React æˆ‘ä»¬å¸Œæœ›è¿™æ˜¯ä¸€ä¸ªå—æ§è¾“å…¥æ¡†ã€‚ä½†æ˜¯ï¼Œè¿™åªæœ‰åœ¨æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªå®šä¹‰çš„å€¼æ—¶æ‰èµ·ä½œç”¨ï¼é€šè¿‡å°†emailåˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œ**æˆ‘ä»¬ç¡®ä¿ value æ°¸è¿œä¸ä¼šè¢«è®¾ç½®ä¸ºundefined**ã€‚

> å—æ§è¾“å…¥
>
> å¦‚æœæ‚¨æƒ³è¯¦ç»†äº†è§£ä¸ºä»€ä¹ˆè¿™æ˜¯å¿…è¦çš„ï¼Œä»¥åŠä»€ä¹ˆæ˜¯â€œå—æ§è¾“å…¥â€ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘æœ€è¿‘å‘å¸ƒçš„æ•™ç¨‹ä¸­æ·±å…¥æ¢è®¨è¿™äº›æƒ³æ³•ï¼š[Reactä¸­çš„æ•°æ®ç»‘å®š](https://link.juejin.cn/?target=https%3A%2F%2Fwww.joshwcomeau.com%2Freact%2Fdata-binding%2F 'https://www.joshwcomeau.com/react/data-binding/')

JSX è¢«è®¾è®¡å¾—çœ‹èµ·æ¥å¾ˆåƒ HTMLï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›ä»¤äººæƒŠè®¶çš„å·®å¼‚ï¼Œå¾€å¾€ä¼šè®©äººæªæ‰‹ä¸åŠã€‚å¤§å¤šæ•°å·®å¼‚éƒ½æœ‰å¾ˆå¥½çš„æ–‡æ¡£è®°å½•ï¼Œè€Œä¸”æ§åˆ¶å°çš„è­¦å‘Šé€šå¸¸éå¸¸å…·ä½“å’Œæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ„å¤–ä½¿ç”¨ class è€Œä¸æ˜¯classNameï¼ŒReactä¼šå‡†ç¡®å‘Šè¯‰ä½ é—®é¢˜æ‰€åœ¨ã€‚ä½†æœ‰ä¸€ä¸ªå¾®å¦™çš„å·®å¼‚ç»å¸¸è®©äººå›°æƒ‘ï¼šstyleå±æ€§ã€‚åœ¨HTMLä¸­ï¼Œstyleæ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¡¨ç¤ºçš„ï¼š

```
<button style="color: red; font-size: 1.25rem">
  Hello World
</button>

```

ä½†æ˜¯ï¼Œåœ¨ JSX ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æŒ‡å®šä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å¸¦æœ‰é©¼å³°å±æ€§åç§°ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘è¯•å›¾åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†å‡ºç°äº†é”™è¯¯ã€‚ä½ èƒ½æ‰¾å‡ºé”™è¯¯å—ï¼Ÿ

```
import React from 'react';

function App() {
  return (
    <button
      style={ color: 'red', fontSize: '1.25rem' }
    >
      Hello World
    </button>
  );
}

export default App;

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623140901535](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/28fa19ffac9646038b3c3ee0e5fcbb91~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

é—®é¢˜æ˜¯æˆ‘éœ€è¦ä½¿ç”¨**åŒæ³¢æµªçº¿**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
<button
  // "{{", instead of "{":
  style={{ color: 'red', fontSize: '1.25rem' }}
>
  Hello World
</button>

```

ä¸ºäº†ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·æ˜¯å¿…è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®äº†è§£ä¸€ä¸‹è¿™ä¸ªè¯­æ³•ã€‚åœ¨JSXä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨èŠ±æ‹¬å·æ¥åˆ›å»ºä¸€ä¸ªè¡¨è¾¾å¼æ’æ§½ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ’æ§½ä¸­æ”¾ç½®ä»»ä½•æœ‰æ•ˆçš„JavaScriptè¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š

```
<button className={isPrimary ? 'btn primary' : 'btn'}>

```

æ— è®ºæˆ‘ä»¬åœ¨{}ä¸­æ”¾ç½®ä»€ä¹ˆï¼Œéƒ½å°†è¢«è§†ä¸ºJavaScriptè¿›è¡Œæ±‚å€¼ï¼Œå¹¶å°†ç»“æœè®¾ç½®ä¸ºè¯¥å±æ€§çš„å€¼ã€‚classNameå°†æ˜¯'btn primary'æˆ–'btn'ã€‚å¯¹äºstyleï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªè¡¨è¾¾å¼æ’æ§½ï¼Œç„¶åå°†ä¸€ä¸ªJavaScriptå¯¹è±¡ä¼ é€’åˆ°è¿™ä¸ªæ’æ§½ä¸­ã€‚æˆ‘è®¤ä¸ºå¦‚æœæˆ‘ä»¬å°†å¯¹è±¡æå–åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œä¼šæ›´æ¸…æ™°æ˜äº†ï¼š

```
// 1. Create the style object:
const btnStyles = { color: 'red', fontSize: '1.25rem' };
// 2. Pass that object to the `style` attribute:
<button style={btnStyles}>
  Hello World
</button>
// Or, we can do it all in 1 step:
<button style={{ color: 'red', fontSize: '1.25rem' }}>

```

å¤–å±‚çš„èŠ±æ‹¬å·åˆ›å»ºäº†JSXä¸­çš„"è¡¨è¾¾å¼æ’æ§½"ã€‚å†…å±‚çš„èŠ±æ‹¬å·åˆ›å»ºäº†ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œç”¨äºä¿å­˜æˆ‘ä»¬çš„æ ·å¼ã€‚

### 8\. å¼‚æ­¥çš„ effect å‡½æ•°

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æŒ‚è½½æ—¶ä» API ä¸­è·å–ä¸€äº›ç”¨æˆ·æ•°æ®ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ useEffect é’©å­ï¼Œå¹¶å¸Œæœ›ä½¿ç”¨ await å…³é”®å­—ã€‚ä»¥ä¸‹æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å°è¯•çš„ä»£ç ï¼š

```
// app.js
import React from 'react';
import UserProfile from './UserProfile';

function App() {
  return (
    <UserProfile userId="abc123" />
  );
}

export default App;

```

```
// UserProfile.js
import React from 'react';
import { API } from './constants';

function UserProfile({ userId }) {
  const [user, setUser] = React.useState(null);

  React.useEffect(() => {
    const url = `${API}/get-profile?id=${userId}`;
    const res = await fetch(url);
    const json = await res.json();

    setUser(json.user);
  }, [userId]);

  if (!user) {
    return 'Loadingâ€¦';
  }

  return (
    <section>
      <dl>
        <dt>Name</dt>
        <dd>{user.name}</dd>
        <dt>Email</dt>
        <dd>{user.email}</dd>
      </dl>
    </section>
  );
}

export default UserProfile;

```

```
// constants.js
export const API = 'https://jor-test-api.vercel.app/api';

```

ä½ ä¼šçœ‹åˆ°ï¼š

![image-20230623141348771](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/21cd98d1e5e442508154784aa3064191~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ”¶åˆ°ä¸€ä¸ªé”™è¯¯ï¼š

![image-20230623141402587](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/64ca8115286e48bfa8a83db139c63246~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

**è¿™æ˜¯ä¿®æ­£çš„æ–¹æ³•ï¼š** æˆ‘ä»¬éœ€è¦åœ¨ effect ä¸­åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¼‚æ­¥å‡½æ•°ï¼š

```
React.useEffect(() => {
  // Create an async function...
  async function runEffect() {
    const url = `${API}/get-profile?id=${userId}`;
    const res = await fetch(url);
    const json = await res.json();
    setUser(json);
  }
  // ...and then invoke it:
  runEffect();
}, [userId]);

```

ä¸ºäº†ç†è§£ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå˜é€šæ–¹æ³•ï¼Œå€¼å¾—è€ƒè™‘ä¸€ä¸‹ async å…³é”®å­—çš„å®é™…ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œä½ ä¼šçŒœæµ‹ä¸‹é¢è¿™ä¸ªå‡½æ•°è¿”å›ä»€ä¹ˆï¼Ÿ

```
async function greeting() {
  return "Hello world!";
}

```

ä¹ä¸€çœ‹ï¼Œä¼¼ä¹å¾ˆæ˜æ˜¾ï¼šå®ƒè¿”å›å­—ç¬¦ä¸²`"Hello world!"`ï¼ä½†å®é™…ä¸Šï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª Promiseã€‚è¿™ä¸ª Promise è§£æä¸ºå­—ç¬¦ä¸² `"Hello world!"`ã€‚è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º useEffect é’©å­å¹¶ä¸æœŸæœ›æˆ‘ä»¬è¿”å›ä¸€ä¸ª Promiseï¼å®ƒæœŸæœ›æˆ‘ä»¬è¿”å›æ— å€¼ï¼ˆå°±åƒæˆ‘ä»¬ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ‰€åšçš„ï¼‰ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚æ¸…é™¤å‡½æ•°è¿œè¶…å‡ºäº†æœ¬æ•™ç¨‹çš„èŒƒå›´ï¼Œä½†å®ƒä»¬éå¸¸é‡è¦ã€‚å¤§å¤šæ•°çš„ effect éƒ½ä¼šæœ‰ä¸€äº›æ‹†é™¤é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦å°½å¿«å°†å…¶æä¾›ç»™ Reactï¼Œè¿™æ · React å°±å¯ä»¥åœ¨**ä¾èµ–é¡¹æ›´æ”¹æˆ–ç»„ä»¶å¸è½½æ—¶**è°ƒç”¨å®ƒã€‚ é€šè¿‡ä½¿ç”¨"å•ç‹¬çš„å¼‚æ­¥å‡½æ•°"ç­–ç•¥ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ç«‹å³è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ï¼š

```
React.useEffect(() => {
  async function runEffect() {
    // Effect logic here
  }
  runEffect();
  return () => {
    // Cleanup logic here
  }
}, [userId]);

```

ä½ å¯ä»¥å°†è¿™ä¸ªå‡½æ•°å‘½åä¸ºä»»ä½•ä½ å–œæ¬¢çš„åç§°ï¼Œä½†æˆ‘å–œæ¬¢ä½¿ç”¨é€šç”¨åç§° runEffectã€‚å®ƒæ¸…æ™°åœ°è¡¨æ˜å®ƒåŒ…å«äº†ä¸»è¦çš„ effect é€»è¾‘ã€‚

### 9\. åŸ¹å…»ç›´è§‰ ï¼ˆç»éªŒï¼‰

ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­çœ‹åˆ°çš„å¾ˆå¤šä¿®å¤æ–¹æ³•ä¼¼ä¹ç›¸å½“éšæ„ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªå”¯ä¸€çš„é”®ï¼ˆkeyï¼‰ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬æ— æ³•åœ¨æ”¹å˜çŠ¶æ€åè®¿é—®å®ƒï¼Ÿä¸ºä»€ä¹ˆuseEffectå¦‚æ­¤æ£˜æ‰‹ï¼ŸReactä¸€ç›´ä»¥æ¥éƒ½ç›¸å½“æ£˜æ‰‹ï¼Œå°¤å…¶æ˜¯ç°åœ¨ä½¿ç”¨hooksæ—¶æ›´æ˜¯å¦‚æ­¤ã€‚éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½ç†è§£ä¸€åˆ‡ã€‚æˆ‘åœ¨2015å¹´å¼€å§‹ä½¿ç”¨Reactï¼Œè¿˜è®°å¾—å½“æ—¶æƒ³ï¼šâ€œè¿™ç©æ„å¤ªé…·äº†ï¼Œä½†æˆ‘å®Œå…¨ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚â€ ğŸ˜…ä»é‚£æ—¶èµ·ï¼Œæˆ‘é€æ¸æ„å»ºäº†è‡ªå·±å…³äºReactçš„æ€ç»´æ¨¡å‹ï¼Œä¸€å—ä¸€å—åœ°æ‹¼å‡‘ã€‚æˆ‘ç»å†äº†ä¸€ç³»åˆ—çš„é¡¿æ‚Ÿï¼Œæ¯ä¸€æ¬¡é¡¿æ‚Ÿéƒ½ä½¿æˆ‘çš„æ€ç»´æ¨¡å‹æ›´åŠ åšå®ã€æ›´åŠ å®Œå–„ã€‚æˆ‘å¼€å§‹ç†è§£Reactä¸ºä»€ä¹ˆä¼šä»¥è¿™ç§æ–¹å¼å·¥ä½œã€‚æˆ‘å‘ç°è‡ªå·±ä¸å¿…è®°ä½ä»»æ„çš„è§„åˆ™ï¼›ç›¸åï¼Œæˆ‘å¯ä»¥ä¾é è‡ªå·±çš„ç›´è§‰ã€‚å¾ˆéš¾è¨€å–» React å¯¹æˆ‘æ¥è¯´å˜å¾—æ›´åŠ æœ‰è¶£äº†ï¼åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨å¼€å‘ä¸€é—¨åä¸ºã€ŠReactçš„ä¹è¶£ã€‹çš„äº¤äº’å¼è‡ªå­¦åœ¨çº¿è¯¾ç¨‹ã€‚è¿™æ˜¯ä¸€é—¨é¢å‘åˆå­¦è€…çš„è¯¾ç¨‹ï¼Œæ—¨åœ¨å¸®åŠ©ä½ å»ºç«‹å¯¹Reactå·¥ä½œåŸç†çš„ç›´è§‰ï¼Œä»¥ä¾¿ç”¨å®ƒæ„å»ºä¸°å¯Œã€åŠ¨æ€çš„Webåº”ç”¨ç¨‹åºã€‚æˆ‘çš„è¯¾ç¨‹ä¸å…¶ä»–è¯¾ç¨‹ä¸åŒï¼›ä½ ä¸ä¼šååœ¨é‚£é‡Œçœ‹æˆ‘è¿ç»­å‡ ä¸ªå°æ—¶åœ°ç¼–ç ã€‚ã€ŠReactçš„ä¹è¶£ã€‹ç»“åˆäº†è®¸å¤šä¸åŒçš„åª’ä½“å½¢å¼ï¼šè§†é¢‘ã€äº¤äº’å¼æ–‡ç« ã€æŒ‘æˆ˜æ€§ç»ƒä¹ ã€ä»¥çœŸå®ä¸–ç•Œä¸ºçµæ„Ÿçš„é¡¹ç›®ï¼Œç”šè‡³è¿˜æœ‰ä¸€ä¸¤ä¸ªå°æ¸¸æˆã€‚ã€ŠReactçš„ä¹è¶£ã€‹å°†åœ¨å‡ ä¸ªæœˆå†…å‘å¸ƒã€‚ä½ å¯ä»¥åœ¨è¯¾ç¨‹ä¸»é¡µä¸Šäº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¹¶æ³¨å†Œæ¥æ”¶æ›´æ–°ï¼š[ã€Šreactçš„ä¹è¶£ã€‹](https://link.juejin.cn/?target=https%3A%2F%2Fwww.joyofreact.com%2F 'https://www.joyofreact.com/')

â€ END

æˆ‘æƒ³è¡¥å……ä¸¤ä¸ªæˆ‘æœ€è¿‘å¼€å‘é‡åˆ°çš„é—®é¢˜ï¼Œ

0.  ç¬¬ä¸€ä¸ªå°±æ˜¯ useState çš„å¼‚æ­¥é—®é¢˜ï¼Œå½“æˆ‘ä»¬setStateåå¦‚æœç«‹åˆ»å–å€¼ state å¾—åˆ°çš„å¯èƒ½ä¸æ˜¯æœ€æ–°çš„å€¼ï¼Œè¿™çœŸçš„å¾ˆå‘äººï¼Œ
1.  ç¬¬äºŒä¸ªæ˜¯ åœ¨React ä¸­ï¼Œå¦‚æœæƒ³è¦ç«‹åˆ»è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ useRef è¿›è¡ŒåŒæ­¥ï¼Œä½†æ˜¯å®ƒä¸èƒ½æ›´æ–°UIè§†å›¾ï¼Œæ‰€ä»¥ä¸€å®šè¦è®°å¾—ä½¿ç”¨ state å»è§¦å‘é¡µé¢ UI æ›´æ–°ï¼Œ
2.  å½“é¢ä¸´åˆ—è¡¨æ•°æ®ï¼Œå¹¶ä¸”é¡µé¢æ¸²æŸ“å¤æ‚æ—¶å€™ï¼Œä¸€å®šè¦è®°å¾—ç»™ç»„ä»¶ä½¿ç”¨ React.memo åŒ…è£¹ï¼Œå½“propsæ›´æ–°çš„æ—¶å€™æ‰é‡æ–°æ¸²æŸ“é¡µé¢ï¼Œè¿™æ ·å°±èƒ½é¿å…ä¸å¿…è¦çš„åˆ·æ–°

æ–‡ç« å¾ˆé•¿ï¼Œéœ€è¦èŠ±10~15åˆ†é’Ÿæ‰èƒ½çœ‹å®Œï¼Œè®¤çœŸçœ‹å®Œçš„åŒå­¦ï¼Œä½ çœŸçš„å¥½å‰å®³ï¼Œä¹Ÿå¸Œæœ›ä½ åœ¨ React çš„å¼€å‘è€…å¯»æ‰¾åˆ°è‡ªå·±çš„æœ€ä½³å®è·µ

åŸæ–‡é“¾æ¥ï¼š [å¸¸è§çš„Reactåˆå­¦è€…é”™è¯¯](https://link.juejin.cn/?target=https%3A%2F%2Fwww.joshwcomeau.com%2Freact%2Fcommon-beginner-mistakes%2F 'https://www.joshwcomeau.com/react/common-beginner-mistakes/')
