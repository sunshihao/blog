---
title: ä¸€ç¯‡æ–‡ç« è®²æ¸…æ¥š React Elementã€React Componentã€JSXã€Fiber ä»¥åŠDiffç®—æ³•çš„æ¦‚å¿µåŠå…¶ç›¸äº’å…³ç³»
description: è¿™ç¯‡æ–‡ç« æ·±å…¥æ¢è®¨äº† React ä¸­çš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ:React Elementã€React Componentã€JSXã€Fiberã€Diff ç®—æ³•å’Œ React.createElementã€‚æ–‡ç« é€šè¿‡æºç åˆ†æå’Œå·¥å…·æ¼”ç¤ºï¼Œè¯¦ç»†è§£é‡Šäº†è¿™äº›æ¦‚å¿µçš„å«ä¹‰åŠå…¶ä¹‹é—´çš„å…³ç³»ã€‚å®ƒé˜æ˜äº† JSX å¦‚ä½•è½¬æ¢ä¸º React Elementï¼ŒReact Component å¦‚ä½•ç”Ÿæˆå’Œç®¡ç† Elementï¼Œä»¥åŠ Fiber æ¶æ„å’Œ Diff ç®—æ³•å¦‚ä½•ä¼˜åŒ– React çš„æ¸²æŸ“è¿‡ç¨‹ã€‚
tags: [React, æºç å­¦ä¹ , ç¬”è®°]
slug: compare-react-some-concept
author: luckySnail
# cover:
date: 2024-05-05
---

æœ€è¿‘åœ¨å­¦ä¹  React æºç çš„æ—¶å€™ï¼Œå‘ç°å¥½å¤šæ¦‚å¿µï¼Œå®ƒä»¬ä¹‹é—´è¿˜æœ‰ä¸€äº›å…³ç³»ã€‚æ€»æ˜¯å®¹æ˜“å¿˜è®°å’Œå¼„æ··ï¼Œæ‰“ç®—å†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹ï¼Œå¿˜è®°äº†å°±å†ç¿»çœ‹çœ‹çœ‹ã€‚è¿™æ¬¡è¦å¼„æ¸…æ¥šçš„æ˜¯

- React Element

- React Component

- JSX

- Fiber

- Diff ç®—æ³•

- React.createElement

æˆ‘ä¼šå…ˆä»‹ç»ä¸€ä¸‹ä»¥ä¸Šæ¯ä¸€ä¸ªï¼Œç„¶åå†é€šè¿‡æºç å’Œå·¥å…·ï¼Œæ¥ç†è§£å®ƒä»¬çš„å…³ç³»ï¼Œæ¥æˆ‘ä»¬å…ˆçœ‹çœ‹å®ƒä»¬çš„â€œè‡ªæˆ‘ç®€ä»‹â€

## å®ƒä»¬çš„â€œè‡ªæˆ‘ç®€ä»‹â€

### React Element

`React Element` æ˜¯æ„å»º React åº”ç”¨çš„æœ€å°å•å…ƒã€‚å®ƒæ˜¯å¯¹ä¸€ä¸ª DOM å…ƒç´ çš„è½»é‡çº§æè¿°ï¼Œ**æœ€åéƒ½ä¼šè¢«è½¬åŒ–ä¸ºçº¯ JavaScript å¯¹è±¡**ï¼Œ`React Element` å¯¹è±¡åŒ…å«äº†å‡ ä¸ªåŸºæœ¬çš„å±æ€§ï¼Œå¦‚ï¼š

- typeï¼šè¡¨ç¤ºå…ƒç´ çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆå¦‚ 'div', 'span' ç­‰ HTML å…ƒç´ ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª React ç»„ä»¶ã€‚

- propsï¼šåŒ…å«äº†è¯¥å…ƒç´ çš„å±æ€§ï¼Œä»¥åŠä¼ é€’ç»™å­å…ƒç´ çš„æ•°æ®ã€‚

- keyï¼šä¸€ä¸ªå¯é€‰çš„ã€åœ¨å…„å¼Ÿå…ƒç´ ä¹‹é—´å¿…é¡»å”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œç”¨äºåœ¨é‡æ–°æ¸²æŸ“æ—¶å¸®åŠ©è¯†åˆ«å…ƒç´ çš„ç¨³å®šæ€§ã€‚

`React Element`æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦è¢«åˆ›å»ºï¼Œä½ ä¸èƒ½æ”¹å˜å…¶å†…å®¹æˆ–å±æ€§ã€‚å¦‚æœç•Œé¢éœ€è¦æ›´æ–°ï¼ŒReact ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Elementï¼Œå¹¶åœ¨å¿…è¦æ—¶é€šè¿‡æ¯”è¾ƒæ–°æ—§ `Elements` æ¥æœ‰æ•ˆåœ°æ›´æ–° DOMã€‚å› æ­¤ï¼Œå¯ä»¥å°† `React Element` ç†è§£ä¸ºæè¿°ç•Œé¢ç»“æ„çš„çº¯æ•°æ®ç»“æ„ï¼Œå®ƒä»¬æ˜¯è™šæ‹Ÿ DOM çš„ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæœ€ç»ˆç”ŸæˆçœŸå®çš„ DOM ç»“æ„ã€‚è¿™ç§è®¾è®¡ä½¿å¾— React å¯ä»¥åœ¨ä¸ç›´æ¥æ“ä½œ DOM çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ¯”è¾ƒå’Œé‡æ–°æ¸²æŸ“ `Elements` æ¥é«˜æ•ˆåœ°æ›´æ–°ç•Œé¢ã€‚çœ‹ä¸€ä¸‹çœŸå®çš„ React Elementï¼š

```
// <div classname="snail-run">snailRun</div>;   // JSX è½¬åŒ–ä¸º React ELement çš„å¯¹è±¡å¦‚ä¸‹ï¼š   {     '$$typeof': Symbol(react.transitional.element),     type: 'div',     key: null,     props: { classname: 'snail-run', children: 'snailRun' },     _owner: null,     _store: {}   }
```

### React Component

`React Component` æ˜¯æ„æˆ React åº”ç”¨çš„ç‹¬ç«‹ã€å¯å¤ç”¨çš„ä»£ç å—ã€‚å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯è¿”å› `React Element`çš„ `JavaScript` å‡½æ•°æˆ–ç±»ã€‚ç»„ä»¶å¯ä»¥æ¥å—è¾“å…¥ï¼ˆç§°ä¸º `props`ï¼‰ï¼Œå¹¶è¿”å›`React Element`ã€‚ç»„ä»¶åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶é€šå¸¸æ›´ç®€æ´ï¼Œæ”¯æŒ Hooksã€‚å®ƒè¿˜å¯ä»¥ä½œä¸º `React.createElement`çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ type å­—æ®µã€‚æˆ‘ä»¬æ—¥å¸¸å¼€å‘ React é¡¹ç›®ï¼Œå†™çš„æœ€å¤šçš„ä¹Ÿå°±æ˜¯ `React Component`,ç»™å¤§å®¶å†™ä¸€ä¸‹æœ€ç®€å•çš„å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼š

```
// å‡½æ•°ç»„ä»¶   function AppFunc() {     // å¯ä»¥ä½¿ç”¨ react hooks     return <div>snailRun</div>;   }   // ç±»ç»„ä»¶   class AppClass extends React.Component {     render() {       return <div>snailRun</div>;     }   }
```

### JSX

JSXæ˜¯ä¸€ç§è¯­æ³•æ‰©å±•ï¼ˆè¯­æ³•ç³–ï¼‰ï¼Œçœ‹èµ·æ¥å¾ˆåƒ `XML`æˆ– `HTML`ã€‚`JSX`æä¾›äº†ä¸€ç§æ›´ç›´è§‚çš„æ–¹å¼æ¥æè¿°UIï¼Œå®ƒè®©å¼€å‘è€…å¯ä»¥åœ¨ `JavaScript`ä»£ç ä¸­å†™æ ‡ç­¾è¯­è¨€ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œ`JSX`ä¼šè¢«è½¬æ¢æˆæ ‡å‡†çš„`JavaScript`å¯¹è±¡ï¼Œå³ `React Elements`ï¼ŒJSX ç¤ºä¾‹ä»£ç ï¼š

```
<div classname="name">snailRun</div>
```

### Fiber

`Fiber` æ˜¯ä¸€ç§æ–°çš„å†…éƒ¨æ¶æ„ï¼Œç”¨äºå¢å¼º React çš„èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ¨ç”»ã€å¸ƒå±€å’Œä¸­æ–­æ¸²æŸ“æ–¹é¢ã€‚`Fiber`æ¶æ„é¦–æ¬¡åœ¨ `React 16`ä¸­å¼•å…¥ï¼Œç›®çš„æ˜¯è§£å†³ä»¥å‰ç‰ˆæœ¬ React é€’å½’æ›´æ–°è¿‡ç¨‹ä¸èƒ½ä¸­æ–­çš„é—®é¢˜ï¼Œ**å®ƒèƒ½å¤Ÿå°†æ¸²æŸ“å·¥ä½œåˆ†è§£æˆå°çš„å•å…ƒï¼Œæ¯å®Œæˆä¸€å°éƒ¨åˆ†å·¥ä½œåï¼Œå°±èƒ½å°†æ§åˆ¶æƒäº¤å›ç»™æµè§ˆå™¨ï¼Œè®©æµè§ˆå™¨å¤„ç†å¦‚åŠ¨ç”»ã€å¸ƒå±€ã€è¾“å…¥å“åº”ç­‰å…¶ä»–å·¥ä½œã€‚è¿™ç§èƒ½åŠ›è¢«ç§°ä¸ºâ€œå¯ä¸­æ–­æ¸²æŸ“â€**ã€‚Fiber ä½œä¸ºé™æ€æ•°æ®ç»“æ„æ¥è®²ï¼Œå­˜å‚¨ç€å¾ˆå¤šä¿¡æ¯ï¼Œå’Œ JSX æ•°æ®ç»“æ„å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒå­˜å‚¨æ›´å¤šå†…å®¹ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**å·¥ä½œå•å…ƒ**çš„æŠ½è±¡ï¼Œå®ƒä»£è¡¨ React åœ¨æ„å»ºå’Œæ›´æ–° DOM æ—¶éœ€è¦å®Œæˆçš„å·¥ä½œã€‚æ¯ä¸€ä¸ª `React Element` éƒ½å¯¹åº”ä¸€ä¸ª **Fiber èŠ‚ç‚¹**ï¼Œæ•´ä¸ªåº”ç”¨çš„ç»“æ„å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªå·¨å¤§çš„ Fiber æ ‘ã€‚

### Diff ç®—æ³•

å½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact éœ€è¦å†³å®šæ˜¯å¦æ›´æ–° DOMã€‚React ä½¿ç”¨\*\* Diff ç®—æ³•\*\*æ¥æ¯”è¾ƒæ–°æ—§ä¸¤ä¸ª fiber æ ‘å¹¶æ ‡è®°æ ‡è®°é‚£äº›éœ€è¦è¿›è¡Œæ·»åŠ ã€åˆ é™¤æˆ–æ›´æ–°çš„ Fiber èŠ‚ç‚¹å¹¶ç¡®å®šä¼˜å…ˆçº§ï¼Œæœ€åæäº¤æ›´æ”¹åˆ° DOMï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º `Reconciliation`ï¼ˆåè°ƒï¼‰ã€‚

**Diff ç®—æ³•**ä¼šè¯†åˆ«å‡ºéœ€è¦è¿›è¡Œæ›´æ–°çš„éƒ¨åˆ†ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ“ä½œæ¥æ›´æ–° DOMã€‚è¿™ç§æ–¹æ³•ç¡®ä¿äº†åªæœ‰å®é™…æ”¹å˜çš„éƒ¨åˆ†æ‰ä¼šè¢«é‡æ–°æ¸²æŸ“ï¼Œä»è€Œä¼˜åŒ–äº†æ€§èƒ½ã€‚

> å°çŸ¥è¯† >> é¦–å±æ¸²æŸ“å’Œæ›´æ–°çš„åŒºåˆ«æ˜¯ï¼šåœ¨åˆ›å»º fiber æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦æœ‰diffç®—æ³•

## çœ‹çœ‹æºç 

æƒ³è¦äº†è§£è¿™äº›åè¯å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ `babel`ï¼šhttps://babeljs.io/ï¼Œæ¥çœ‹çœ‹ JSX çš„ç¼–è¯‘ç»“æœã€‚é¦–å…ˆæˆ‘ä»¬ä¸æ·»åŠ ä»»ä½•æ’ä»¶ï¼Œå»æ‰ React é¢„è®¾ï¼Œæ¥å†™ä¸€æ®µ JSX ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŠ¥é”™äº†ï¼Œå› ä¸ºæœ¬æ¥`JavaScript` ä¸çŸ¥é“å¦‚ä½•ç¼–è¯‘ JSX çš„ã€‚

![](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/640-20240801000429279.png)

æˆ‘ä»¬è¿™æ—¶å€™æ»‘åŠ¨å·¦è¾¹åˆ°åº•éƒ¨ç‚¹å‡» `add plugin` ï¼Œæ·»åŠ ä¸€ä¸ª `transform-react-jsx`æ’ä»¶ã€‚

![](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/640-20240801000433968.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒJSX è¯­æ³•è¢«æˆåŠŸç¼–è¯‘ï¼Œæˆ‘ä»¬çš„å·¦ä¾§å°±è¢«ç¼–è¯‘æˆä¸ºäº†å³ä¾§ï¼Œå®ƒçš„ç»“æœå°±æ˜¯ JSX çš„ç»“æœï¼š

![](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/work/640-20240801000437837.png)

é‚£æˆ‘ä»¬ç°åœ¨æ¥çœ‹çœ‹ç¼–è¯‘åçš„è¿™ä¸ªä»£ç çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿä¹Ÿå°±æ˜¯`React.createElement`åšäº†ä»€ä¹ˆï¼Ÿæˆ‘å¸®å¤§å®¶æ‰¾åˆ°äº† React æºç ä¸­ `React.createElement`çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™æ®µä»£ç ï¼š

```javascript
/**
 * Create and return a new ReactElement of the given type.
 * See https://reactjs.org/docs/react-api.html#createelement
 */
export function createElement(type, config, children) {
	if (__DEV__) {
		if (!isValidElementType(type)) {
			// This is an invalid element type.
			//
			// We warn in this case but don't throw. We expect the element creation to
			// succeed and there will likely be errors in render.
			let info = '';
			if (
				type === undefined ||
				(typeof type === 'object' &&
					type !== null &&
					Object.keys(type).length === 0)
			) {
				info +=
					' You likely forgot to export your component from the file ' +
					"it's defined in, or you might have mixed up default and named imports.";
			}

			let typeString;
			if (type === null) {
				typeString = 'null';
			} else if (isArray(type)) {
				typeString = 'array';
			} else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {
				typeString = `<${getComponentNameFromType(type.type) || 'Unknown'} />`;
				info =
					' Did you accidentally export a JSX literal instead of a component?';
			} else {
				typeString = typeof type;
			}

			console.error(
				'React.createElement: type is invalid -- expected a string (for ' +
					'built-in components) or a class/function (for composite ' +
					'components) but got: %s.%s',
				typeString,
				info
			);
		} else {
			// This is a valid element type.

			// Skip key warning if the type isn't valid since our key validation logic
			// doesn't expect a non-string/function type and can throw confusing
			// errors. We don't want exception behavior to differ between dev and
			// prod. (Rendering will throw with a helpful message and as soon as the
			// type is fixed, the key warnings will appear.)
			for (let i = 2; i < arguments.length; i++) {
				validateChildKeys(arguments[i], type);
			}
		}

		// Unlike the jsx() runtime, createElement() doesn't warn about key spread.
	}

	let propName;

	// Reserved names are extracted
	const props = {};

	let key = null;
	let ref = null;

	if (config != null) {
		if (__DEV__) {
			if (
				!didWarnAboutOldJSXRuntime &&
				'__self' in config &&
				// Do not assume this is the result of an oudated JSX transform if key
				// is present, because the modern JSX transform sometimes outputs
				// createElement to preserve precedence between a static key and a
				// spread key. To avoid false positive warnings, we never warn if
				// there's a key.
				!('key' in config)
			) {
				didWarnAboutOldJSXRuntime = true;
				console.warn(
					'Your app (or one of its dependencies) is using an outdated JSX ' +
						'transform. Update to the modern JSX transform for ' +
						'faster performance: https://react.dev/link/new-jsx-transform'
				);
			}
		}

		if (hasValidRef(config)) {
			if (!enableRefAsProp) {
				ref = config.ref;
				if (!disableStringRefs) {
					ref = coerceStringRef(ref, getOwner(), type);
				}
			}

			if (__DEV__ && !disableStringRefs) {
				warnIfStringRefCannotBeAutoConverted(config, config.__self);
			}
		}
		if (hasValidKey(config)) {
			if (__DEV__) {
				checkKeyStringCoercion(config.key);
			}
			key = '' + config.key;
		}

		// Remaining properties are added to a new props object
		for (propName in config) {
			if (
				hasOwnProperty.call(config, propName) &&
				// Skip over reserved prop names
				propName !== 'key' &&
				(enableRefAsProp || propName !== 'ref') &&
				// Even though we don't use these anymore in the runtime, we don't want
				// them to appear as props, so in createElement we filter them out.
				// We don't have to do this in the jsx() runtime because the jsx()
				// transform never passed these as props; it used separate arguments.
				propName !== '__self' &&
				propName !== '__source'
			) {
				if (enableRefAsProp && !disableStringRefs && propName === 'ref') {
					props.ref = coerceStringRef(config[propName], getOwner(), type);
				} else {
					props[propName] = config[propName];
				}
			}
		}
	}

	// Children can be more than one argument, and those are transferred onto
	// the newly allocated props object.
	const childrenLength = arguments.length - 2;
	if (childrenLength === 1) {
		props.children = children;
	} else if (childrenLength > 1) {
		const childArray = Array(childrenLength);
		for (let i = 0; i < childrenLength; i++) {
			childArray[i] = arguments[i + 2];
		}
		if (__DEV__) {
			if (Object.freeze) {
				Object.freeze(childArray);
			}
		}
		props.children = childArray;
	}

	// Resolve default props
	if (type && type.defaultProps) {
		const defaultProps = type.defaultProps;
		for (propName in defaultProps) {
			if (props[propName] === undefined) {
				props[propName] = defaultProps[propName];
			}
		}
	}
	if (__DEV__) {
		if (key || (!enableRefAsProp && ref)) {
			const displayName =
				typeof type === 'function'
					? type.displayName || type.name || 'Unknown'
					: type;
			if (key) {
				defineKeyPropWarningGetter(props, displayName);
			}
			if (!enableRefAsProp && ref) {
				defineRefPropWarningGetter(props, displayName);
			}
		}
	}

	const element = ReactElement(
		type,
		key,
		ref,
		undefined,
		undefined,
		getOwner(),
		props
	);

	if (type === REACT_FRAGMENT_TYPE) {
		validateFragmentProps(element);
	}

	return element;
}
```

ç°åœ¨è®©æˆ‘æ¥ç®€å•è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç ï¼š

**å‚æ•°è¯´æ˜ï¼š**

- typeï¼šå…ƒç´ çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ HTML æ ‡ç­¾çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼ˆ å‡½æ•°ç»„ä»¶ å’Œ ç±»ç»„ä»¶ï¼‰

- configï¼šä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒåŒ…å«äº†å…ƒç´ çš„å±æ€§ï¼ˆpropsï¼‰ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬ç‰¹æ®Šå±æ€§å¦‚ key å’Œ refã€‚

- childrenï¼šå­å…ƒç´ ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œè¡¨ç¤ºå…ƒç´ çš„å­èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ï¼š`React.createElement("div", {classname: "snail-run"}, "snailRun");`

**ä¸»è¦é€»è¾‘ï¼š**

1.  **ç±»å‹éªŒè¯**ï¼šé¦–å…ˆæ£€æŸ¥ type æ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœæ— æ•ˆï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚æœ‰æ•ˆæ€§æ£€æŸ¥åŒ…æ‹¬æ˜¯å¦æœªå®šä¹‰ã€æ˜¯å¦ä¸ºç©ºå¯¹è±¡ã€æ˜¯å¦ä¸ºæ•°ç»„ç­‰æƒ…å†µã€‚

2.  **å¤„ç†é…ç½®å¯¹è±¡ï¼ˆconfigï¼‰**ï¼š

- **å¤„ç† ref**ï¼šå¦‚æœé…ç½®å¯¹è±¡ä¸­æœ‰ ref å±æ€§ï¼Œå¹¶ä¸”å½“å‰ç¯å¢ƒå…è®¸ ref ä½œä¸ºå±æ€§ï¼Œé‚£ä¹ˆå°†å…¶æ·»åŠ åˆ°æ–°çš„ props å¯¹è±¡ä¸­ã€‚

- **å¤„ç† key**ï¼šå¦‚æœé…ç½®å¯¹è±¡ä¸­æœ‰ key å±æ€§ï¼Œå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶å­˜å‚¨ã€‚

- **å¤åˆ¶å…¶ä»–å±æ€§**ï¼šå°† `config` å¯¹è±¡ä¸­çš„å…¶ä»–å±æ€§å¤åˆ¶åˆ°æ–°çš„ props å¯¹è±¡ä¸­ï¼Œå¿½ç•¥ `keyã€refã€__self` å’Œ `__source` ç­‰ç‰¹æ®Šæˆ–ä¿ç•™å±æ€§ã€‚

4.  **å¤„ç†å­å…ƒç´ **ï¼š

- å¦‚æœåªæœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œç›´æ¥å°†å…¶èµ‹å€¼ç»™ `props.children`ã€‚

- å¦‚æœæœ‰å¤šä¸ªå­å…ƒç´ ï¼Œå°†å®ƒä»¬æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶èµ‹å€¼ç»™ `props.children`ã€‚

6.  **å¤„ç†é»˜è®¤å±æ€§**ï¼šå¦‚æœç±»å‹ type æœ‰é»˜è®¤å±æ€§ï¼ˆ`defaultProps`ï¼‰ï¼Œåˆ™å°†æœªåœ¨ props ä¸­æ˜¾å¼è®¾ç½®çš„å±æ€§å¡«å……ä¸ºé»˜è®¤å€¼ã€‚

7.  **åˆ›å»º React Element**ï¼šä½¿ç”¨ `ReactElement` å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ React å…ƒç´ ï¼Œä¼ å…¥ `typeã€keyã€refã€props` ç­‰å‚æ•°ã€‚

8.  **ç‰¹æ®Šç±»å‹å¤„ç†**ï¼šå¦‚æœ type æ˜¯ `Fragment` ç±»å‹ï¼Œè¿˜ä¼šå¯¹ `Fragment` çš„å±æ€§è¿›è¡ŒéªŒè¯ã€‚

**å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚**

ä»£ç ä¸­å¤šæ¬¡å‡ºç°`__DEV__`çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œè¿™æ˜¯ç”¨æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä¼šè¿›è¡Œæ›´å¤šçš„è­¦å‘Šå’Œé”™è¯¯æ£€æŸ¥ï¼Œä»¥å¸®åŠ©å¼€å‘è€…å‘ç°æ½œåœ¨é—®é¢˜ã€‚

**æ€»ç»“ï¼š**

- `createElement` å‡½æ•°æ¥å—å‚æ•°åï¼Œé€šè¿‡æ ¡éªŒå‚æ•°å’Œå¤„ç†ï¼Œæœ€åè¿”å›äº† `ReactElement`ï¼Œä¹Ÿå°±æ˜¯è¯´ JSX ç¼–è¯‘å¾—åˆ°çš„ç»“æœæ˜¯ `ReactElement`ï¼Œ

- \*\*JSX \*\*æ˜¯å†™ React ç»„ä»¶æ—¶ç”¨æ¥å£°æ˜å…ƒç´ çš„è¯­æ³•ç³–ï¼Œæœ¬è´¨æ˜¯ `React.createElement`ï¼Œæœ€ç»ˆ JSX è¢«è½¬æ¢æˆ `React Element`ã€‚

## å®ƒä»¬çš„å…³ç³»

1.  **JSX ä¸ React Element çš„å…³ç³»**ï¼š`JSX` æ˜¯ `JavaScript` çš„è¯­æ³•æ‰©å±•ï¼Œçœ‹èµ·æ¥å¾ˆåƒ `HTML`ã€‚å¼€å‘è€…é€šå¸¸ä½¿ç”¨ `JSX` æ¥æè¿° `UI` ç»“æ„ã€‚å½“ `JSX` è¢«ç¼–è¯‘æ—¶ï¼Œå®ƒä¼šè¢«è½¬æ¢æˆ `React Element`ã€‚å› æ­¤ï¼Œå¯ä»¥è®¤ä¸º `JSX` æ˜¯åˆ›å»º `React Element` çš„è¯­æ³•ç³–ã€‚

2.  **React Element ä¸ React Component çš„å…³ç³»**ï¼š`React Element` æ˜¯ `React`åº”ç”¨ä¸­æœ€å°çš„æ„å»ºå—ï¼Œå®ƒæ˜¯å¯¹ç»„ä»¶è¾“å‡ºçš„è½»é‡çº§æè¿°ã€‚`React Component` åˆ™æ˜¯å°è£…äº†é€»è¾‘å’ŒçŠ¶æ€çš„ç‹¬ç«‹å•å…ƒï¼Œå®ƒè¿”å› `React Element`ã€‚å› æ­¤ï¼Œç»„ä»¶æ˜¯åˆ›å»ºå’Œç®¡ç†å…ƒç´ çš„å®¹å™¨ã€‚

3.  **React Element å’Œ Fiber èŠ‚ç‚¹çš„å…³ç³»**ï¼šæ¯ä¸ª `React Element`åœ¨å†…éƒ¨å¯¹åº”ä¸€ä¸ª `Fiber` èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹æ˜¯å®é™…æ‰§è¡Œå·¥ä½œçš„å•ä½ã€‚

4.  **React Component å’Œ Fiber çš„å…³ç³»**ï¼šåœ¨ `React 16` ç‰ˆæœ¬ä¸­å¼•å…¥äº† `Fiber` æ¶æ„ï¼Œè¿™æ˜¯ä¸€ç§æ–°çš„åè°ƒç®—æ³•ï¼Œç”¨äºæé«˜åº”ç”¨çš„æ€§èƒ½å’Œå“åº”æ€§ã€‚æ¯ä¸ª `React Component` åœ¨æ¸²æŸ“æ—¶éƒ½ä¼šå¯¹åº”**ä¸€ä¸ªæˆ–å¤šä¸ª** `Fiber` èŠ‚ç‚¹ã€‚`React` ä¸­çš„ä¸€ä¸ª**å·¥ä½œå•å…ƒ**é€šå¸¸æ˜¯ä¸€ä¸ª `Fiber`èŠ‚ç‚¹ï¼Œ`React` é€šè¿‡è¿™äº›**å·¥ä½œå•å…ƒ**æ¥æ„å»ºå’Œæ›´æ–°è™šæ‹Ÿ `DOM`ã€‚

5.  **Diff ç®—æ³•æ¯”è¾ƒ Element å˜åŒ–**ï¼šå½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å˜åŒ–æ—¶ï¼Œ`React`ä¼šä½¿ç”¨ `Diff`ç®—æ³•æ¯”è¾ƒæ—§çš„å’Œæ–°çš„ `React Element`ï¼Œç¡®å®šå“ªäº›éœ€è¦æ›´æ–°ã€‚

6.  **Fiber ä¸ Diff ç®—æ³•çš„å…³ç³»**ï¼š`Diff` ç®—æ³•æ˜¯ `React` ä¸­**ç”¨äºå¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOM çš„å·®å¼‚ï¼Œå¹¶å†³å®šå¦‚ä½•æœ‰æ•ˆæ›´æ–°çœŸå® DOM çš„è¿‡ç¨‹**ã€‚åœ¨ `Fiber` æ¶æ„ä¸­ï¼Œ`Diff` ç®—æ³•è¢«ç”¨äºç¡®å®šå“ªäº› `Fiber` èŠ‚ç‚¹éœ€è¦å˜æ›´ã€å“ªäº›å¯ä»¥ä¿ç•™ã€‚`Fiber` æ¶æ„ä½¿å¾— `React` å¯ä»¥ä¸­æ–­å’Œæ¢å¤ `Diff` è¿‡ç¨‹ï¼Œå…è®¸ä»»åŠ¡æŒ‰ä¼˜å…ˆçº§è¿›è¡Œï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½ã€‚

7.  **æ•´ä½“æµç¨‹**ï¼šå½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`React` ä¼šé‡æ–°æ‰§è¡Œ é€šè¿‡ `JSX`ï¼ˆ`React.createElement` è¯­æ³•ç³–ï¼‰ åˆ›å»ºçš„ç»„ä»¶ï¼ˆ`React Component`ï¼‰çš„æ¸²æŸ“å‡½æ•°ï¼Œç”Ÿæˆæ–°çš„ `React Element`ã€‚ç„¶åï¼Œ`React` ä½¿ç”¨ **Diff ç®—æ³•**å¯¹æ¯”æ–°æ—§å…ƒç´ ï¼Œé€šè¿‡\*\* Fiber æ¶æ„\*\*å°†è¿™äº›å˜æ›´åˆ†è§£æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œé€æ­¥æ‰§è¡Œè¿™äº›ä»»åŠ¡ï¼Œç”Ÿæˆæ–°çš„ `fiber` æ ‘ï¼Œæœ€ç»ˆå°†å˜æ›´åæ˜ åˆ°çœŸå®çš„ `DOM` ä¸Šã€‚

æ€»ç»“æ¥è¯´ï¼Œ**JSX **æä¾›äº†ä¸€ç§å£°æ˜å¼çš„è¯­æ³•æ¥ç”Ÿæˆ `React Element / React Component`ï¼ˆå‡½æ•°ç»„ä»¶ or ç±»ç»„ä»¶ï¼‰ï¼Œè¿™äº›å…ƒç´ æ˜¯ç”± `React Component` è¾“å‡ºçš„ã€‚`React Component` é€šè¿‡** Fiber æ¶æ„**ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€å˜åŒ–ï¼Œè€Œ `Fiber` æ¶æ„å†…éƒ¨ä½¿ç”¨\*\* Diff ç®—æ³•\*\*æ¥ä¼˜åŒ–æ›´æ–°è¿‡ç¨‹ã€‚è¿™äº›æ¦‚å¿µå…±åŒå·¥ä½œï¼Œä½¿å¾— `React` èƒ½å¤Ÿé«˜æ•ˆä¸”çµæ´»åœ°æ„å»ºç”¨æˆ·ç•Œé¢ã€‚

## å‚è€ƒ

1.  React æŠ€æœ¯è§£å¯†ï¼šhttps://react.iamkasong.com/preparation/jsx.html#jsx-%E7%AE%80%E4%BB%8B

2.  ai é—®ç­”ï¼šhttps://devv.ai/search?threadId=dkrfa9t4dwxs

é˜…è¯»åŸæ–‡ä½“éªŒæ›´å¥½ ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»

æœ¬æ–‡è½¬è‡ª [https://mp.weixin.qq.com/s/QYY-aA63pzkkHjMNNW5LJg](https://mp.weixin.qq.com/s/QYY-aA63pzkkHjMNNW5LJg)ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚
